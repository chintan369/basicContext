(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.basicContext = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/* eslint-disable no-unused-vars */
'use strict';
var hasOwnProperty = Object.prototype.hasOwnProperty;
var propIsEnumerable = Object.prototype.propertyIsEnumerable;

function toObject(val) {
	if (val === null || val === undefined) {
		throw new TypeError('Object.assign cannot be called with null or undefined');
	}

	return Object(val);
}

module.exports = Object.assign || function (target, source) {
	var from;
	var to = toObject(target);
	var symbols;

	for (var s = 1; s < arguments.length; s++) {
		from = Object(arguments[s]);

		for (var key in from) {
			if (hasOwnProperty.call(from, key)) {
				to[key] = from[key];
			}
		}

		if (Object.getOwnPropertySymbols) {
			symbols = Object.getOwnPropertySymbols(from);
			for (var i = 0; i < symbols.length; i++) {
				if (propIsEnumerable.call(from, symbols[i])) {
					to[symbols[i]] = from[symbols[i]];
				}
			}
		}
	}

	return to;
};

},{}],2:[function(require,module,exports){
(function (global, factory) {
	if (typeof define === 'function' && define.amd) {
		define(['exports', 'module', './overflow', './coordinates', './basicContextItem', 'object-assign'], factory);
	} else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {
		factory(exports, module, require('./overflow'), require('./coordinates'), require('./basicContextItem'), require('object-assign'));
	} else {
		var mod = {
			exports: {}
		};
		factory(mod.exports, mod, global.overflow, global.coordinates, global.basicContextItem, global.objectAssign);
		global.basicContext = mod.exports;
	}
})(this, function (exports, module, _overflow, _coordinates, _basicContextItem, _objectAssign) {
	'use strict';

	var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

	var _basicContextItem2 = _interopRequireDefault(_basicContextItem);

	var _objectAssign2 = _interopRequireDefault(_objectAssign);

	var basicContext = (function () {
		function basicContext(e, items) {
			var _this = this;

			var opts = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];

			_classCallCheck(this, basicContext);

			items = items.slice();
			opts = (0, _objectAssign2['default'])({}, opts);

			this.id = null;
			this.items = items;
			this.opts = opts;
			this.position = null;
			this.elem = null;

			this.parse = this.parse.bind(this);
			this.active = this.active.bind(this);
			this.visible = this.visible.bind(this);
			this.close = this.close.bind(this);
			this.show = this.show.bind(this);
			this.showSub = this.showSub.bind(this);
			this.hideSub = this.hideSub.bind(this);
			this.close = this.close.bind(this);

			// Generate the id of the context
			var id = this.id = +new Date();

			// Parse the options
			this.parse();

			// Save current overflow and block scrolling of site
			_overflow.set();

			// Create items
			items.forEach(function (item, num) {

				var parent = _this,
				    opts = { num: num, parent: parent };

				items[num] = new _basicContextItem2['default'](item, opts);
			});

			// Render and add context to the body
			if (opts.parent == null) document.body.insertAdjacentHTML('beforeend', this.render());else document.querySelector('.basicContextContainer').insertAdjacentHTML('beforeend', this.render());

			// Select the newly created context
			var elem = this.elem = document.querySelector('.basicContext[data-id=\'' + id + '\']');

			// Cache the context
			this.link(elem);

			// Calculate position
			var position = this.position = _coordinates.get(e, elem);

			// Show the context
			opts.show();

			// Bind events on context
			this.bind();

			// Bind events on items
			items.forEach(function (item, i) {

				var elem = _this.elem.querySelector('.basicContext__item[data-num=\'' + i + '\']');

				item.link(elem);
				item.bind();
			});

			// Call callback when a function
			opts.callback();

			// Do not trigger default event or further propagation
			if (typeof e.preventDefault === 'function') e.preventDefault();
			if (typeof e.stopPropagation === 'function') e.stopPropagation();

			return true;
		}

		_createClass(basicContext, [{
			key: 'parse',
			value: function parse() {

				var opts = this.opts;

				if (opts.parent && opts.parent.constructor.name !== 'basicContext') opts.parent = null;

				if (opts['class'] == null) opts['class'] = '';
				if (opts.parent != null) opts['class'] += ' basicContext--child';

				if (typeof opts.show !== 'function') opts.show = this.show;
				if (typeof opts.close !== 'function') opts.close = this.close;
				if (typeof opts.callback !== 'function') opts.callback = function () {};

				return true;
			}
		}, {
			key: 'link',
			value: function link(elem) {

				this.elem = elem;

				return true;
			}
		}, {
			key: 'bind',
			value: function bind() {
				var _this2 = this;

				var elem = this.elem,
				    opts = this.opts;

				if (opts.parent == null) {

					elem.parentElement.onclick = opts.close;
					elem.parentElement.oncontextmenu = opts.close;
				}

				elem.onmouseenter = function () {

					if (opts.child != null) _this2.hideSub();
				};

				return true;
			}
		}, {
			key: 'show',
			value: function show() {

				var elem = this.elem,
				    position = this.position;

				elem.style.top = position.y + 'px';
				elem.style.left = position.x + 'px';
				elem.style.transformOrigin = position.rx + 'px ' + position.ry + 'px';
				elem.style.opacity = 1;

				return true;
			}
		}, {
			key: 'showSub',
			value: function showSub(items, item) {
				var _this3 = this;

				var opts = this.opts,
				    itemSize = item.elem.getBoundingClientRect();

				// Don't open a new sub-context when a child is already visible
				if (opts.child != null) return false;

				var close = function close() {

					// Only close sub-context when current context has a child
					if (opts.child != null) {

						// Only close child when hovered item
						// is not the trigger of the sub-context
						if (item.active() === false) {

							// Remove highlight from item
							item.elem.classList.remove('basicContext__item--hover');

							opts.child.close();
							return true;
						}
					} else {

						_this3.close();
						return true;
					}

					return false;
				};

				// Show the sub-context
				opts.child = new basicContext({
					clientX: itemSize.left + itemSize.width,
					clientY: itemSize.top
				}, items, {
					parent: this,
					close: close
				});

				// Highlight current item
				item.elem.classList.add('basicContext__item--hover');

				return true;
			}
		}, {
			key: 'hideSub',
			value: function hideSub() {

				var opts = this.opts;

				if (opts.child == null) return false;
				if (opts.child.active() === true) return false;

				if (opts.child.opts.close() === true) opts.child = null;

				return true;
			}
		}, {
			key: 'active',
			value: function active() {

				var id = this.id,
				    elem = this.elem;

				return elem.parentElement.querySelector('.basicContext[data-id=\'' + id + '\']:hover') == null ? false : true;
			}
		}, {
			key: 'visible',
			value: function visible() {

				var elem = this.elem;

				if (elem == null || elem.length === 0) return false;else return true;
			}
		}, {
			key: 'close',
			value: function close() {

				if (this.visible() === false) return false;

				var opts = this.opts,
				    elem = this.elem,
				    container = elem.parentElement;

				// Close child first
				if (opts.child != null) opts.child.close();

				if (opts.parent == null) container.parentElement.removeChild(container);else elem.parentElement.removeChild(elem);

				// Reset overflow to its original value
				_overflow.reset();

				return true;
			}
		}, {
			key: 'render',
			value: function render() {

				var id = this.id,
				    items = this.items,
				    opts = this.opts,
				    html = '';

				// Render items
				items.forEach(function (item) {
					return html += item.render();
				});

				// Wrap context around items
				html = this.renderContext(id, opts, html);

				// Wrap container around context when context is not an sub-context
				if (opts.parent == null) html = this.renderContainer(html);

				return html;
			}
		}, {
			key: 'renderContext',
			value: function renderContext(id, opts, itemsHTML) {

				return '\n\t\t       <div class="basicContext ' + opts['class'] + '" data-id="' + id + '">\n\t\t           <table>\n\t\t               <tbody>\n\t\t                   ' + itemsHTML + '\n\t\t               </tbody>\n\t\t           </table>\n\t\t       </div>\n\t\t       ';
			}
		}, {
			key: 'renderContainer',
			value: function renderContainer(contextHTML) {

				return '\n\t\t       <div class="basicContextContainer">\n\t\t           ' + contextHTML + '\n\t\t       </div>\n\t\t       ';
			}
		}]);

		return basicContext;
	})();

	module.exports = basicContext;
});

},{"./basicContextItem":3,"./coordinates":4,"./overflow":5,"object-assign":1}],3:[function(require,module,exports){
(function (global, factory) {
	if (typeof define === 'function' && define.amd) {
		define(['exports', 'module', 'object-assign'], factory);
	} else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {
		factory(exports, module, require('object-assign'));
	} else {
		var mod = {
			exports: {}
		};
		factory(mod.exports, mod, global.objectAssign);
		global.basicContextItem = mod.exports;
	}
})(this, function (exports, module, _objectAssign) {
	'use strict';

	var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

	var _objectAssign2 = _interopRequireDefault(_objectAssign);

	var ITEM = 'ITEM',
	    SEPARATOR = 'SEPARATOR';

	var basicContextItem = (function () {
		function basicContextItem() {
			var item = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];
			var opts = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

			_classCallCheck(this, basicContextItem);

			item = (0, _objectAssign2['default'])({}, item);
			opts = (0, _objectAssign2['default'])({}, opts);

			this.item = item;
			this.opts = opts;
			this.elem = null;

			this.parse = this.parse.bind(this);
			this.link = this.link.bind(this);
			this.bind = this.bind.bind(this);
			this.active = this.active.bind(this);
			this.render = this.render.bind(this);

			this.parse();

			return true;
		}

		_createClass(basicContextItem, [{
			key: 'parse',
			value: function parse() {

				var item = this.item;

				// Set default values
				if (item.type == null) item.type = Object.keys(item).length === 0 ? SEPARATOR : ITEM;
				if (item.content == null) item.content = 'Undefined';
				if (item['class'] == null) item['class'] = '';

				// Set default function when fn is missing
				if (typeof item.fn !== 'function') item.fn = function () {};

				// Add disabled class when item disabled
				if (item.disabled !== true) item.disabled = false;
				if (item.disabled === true) item['class'] += ' basicContext__item--disabled';

				// Add invisible class when invisible
				if (item.visible !== false) item.visible = true;
				if (item.visible === false) item['class'] += ' basicContext__item--invisible';

				var opts = this.opts;

				if (opts.parent && opts.parent.constructor.name !== 'basicContext') opts.parent = null;

				return true;
			}
		}, {
			key: 'link',
			value: function link(elem) {

				this.elem = elem;

				return true;
			}
		}, {
			key: 'bind',
			value: function bind() {
				var _this = this;

				var item = this.item,
				    opts = this.opts,
				    elem = this.elem;

				if (elem == null) return false;
				if (item.disabled === true) return false;

				elem.onclick = item.fn;
				elem.oncontextmenu = item.fn;

				if (item.items != null) {
					(function () {

						var timeout = null;

						elem.onmouseenter = function () {
							clearTimeout(timeout);
							timeout = setTimeout(function () {
								return opts.parent.showSub(item.items, _this);
							}, 150);
						};

						elem.onmouseleave = function () {
							clearTimeout(timeout);
							opts.parent.hideSub();
						};
					})();
				}

				return true;
			}
		}, {
			key: 'active',
			value: function active() {

				var opts = this.opts,
				    elem = this.elem;

				return elem.parentElement.querySelector('.basicContext__item[data-num=\'' + opts.num + '\']:hover') == null ? false : true;
			}
		}, {
			key: 'render',
			value: function render() {

				var item = this.item,
				    opts = this.opts;

				if (item.type === ITEM) {

					return '\n\t\t\t       <tr class="basicContext__item ' + item['class'] + '" data-num="' + opts.num + '">\n\t\t\t           <td class=\'basicContext__data\'>' + item.content + '</td>\n\t\t\t       </tr>\n\t\t\t       ';
				}

				if (item.type === SEPARATOR) {

					return '\n\t\t\t       <tr class="basicContext__item basicContext__item--separator"></tr>\n\t\t\t       ';
				}
			}
		}]);

		return basicContextItem;
	})();

	module.exports = basicContextItem;
});

},{"object-assign":1}],4:[function(require,module,exports){
(function (global, factory) {
	if (typeof define === 'function' && define.amd) {
		define(['exports'], factory);
	} else if (typeof exports !== 'undefined') {
		factory(exports);
	} else {
		var mod = {
			exports: {}
		};
		factory(mod.exports);
		global.coordinates = mod.exports;
	}
})(this, function (exports) {
	'use strict';

	Object.defineProperty(exports, '__esModule', {
		value: true
	});
	var normalize = function normalize() {
		var e = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

		var pos = {
			x: e.clientX,
			y: e.clientY
		};

		if (e.type === 'touchend' && (pos.x == null || pos.y == null)) {

			// We need to capture clientX and clientY from original event
			// when the event 'touchend' does not return the touch position

			var touches = e.changedTouches;

			if (touches != null && touches.length > 0) {
				pos.x = touches[0].clientX;
				pos.y = touches[0].clientY;
			}
		}

		// Position unknown
		if (pos.x == null || pos.x < 0) pos.x = 0;
		if (pos.y == null || pos.y < 0) pos.y = 0;

		return pos;
	};

	var get = function get(e, elem) {

		var normalizedPosition = normalize(e);

		// Set the initial position
		var x = normalizedPosition.x,
		    y = normalizedPosition.y;

		// Get size of browser
		var browserSize = {
			width: window.innerWidth,
			height: window.innerHeight
		};

		// Get size of elem
		var elemSize = {
			width: elem.offsetWidth,
			height: elem.offsetHeight
		};

		// Fix position based on elem and browser size
		if (x + elemSize.width > browserSize.width) x = x - (x + elemSize.width - browserSize.width);
		if (y + elemSize.height > browserSize.height) y = y - (y + elemSize.height - browserSize.height);

		// Make elem scrollable and start at the top of the browser
		// when elem is higher than the browser
		if (elemSize.height > browserSize.height) {
			y = 0;
			elem.classList.add('basicContext--scrollable');
		}

		// Calculate the relative position of the mouse to the elem
		var rx = normalizedPosition.x - x,
		    ry = normalizedPosition.y - y;

		return { x: x, y: y, rx: rx, ry: ry };
	};
	exports.get = get;
});

},{}],5:[function(require,module,exports){
(function (global, factory) {
	if (typeof define === 'function' && define.amd) {
		define(['exports'], factory);
	} else if (typeof exports !== 'undefined') {
		factory(exports);
	} else {
		var mod = {
			exports: {}
		};
		factory(mod.exports);
		global.overflow = mod.exports;
	}
})(this, function (exports) {
	'use strict';

	Object.defineProperty(exports, '__esModule', {
		value: true
	});
	var overflow = null;

	var set = function set() {

		if (overflow != null) return false;

		overflow = document.body.style.overflow;
		document.body.style.overflow = 'hidden';

		return true;
	};

	exports.set = set;
	var reset = function reset() {

		if (overflow == null) return false;

		document.body.style.overflow = overflow;
		overflow = null;

		return true;
	};
	exports.reset = reset;
});

},{}]},{},[2])(2)
});
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvb2JqZWN0LWFzc2lnbi9pbmRleC5qcyIsIi9Vc2Vycy90b2JpYXNyZWljaC9TaXRlcy9KUy9iYXNpY0NvbnRleHQvc3JjL3NjcmlwdHMvYmFzaWNDb250ZXh0LmpzIiwiL1VzZXJzL3RvYmlhc3JlaWNoL1NpdGVzL0pTL2Jhc2ljQ29udGV4dC9zcmMvc2NyaXB0cy9iYXNpY0NvbnRleHRJdGVtLmpzIiwiL1VzZXJzL3RvYmlhc3JlaWNoL1NpdGVzL0pTL2Jhc2ljQ29udGV4dC9zcmMvc2NyaXB0cy9jb29yZGluYXRlcy5qcyIsIi9Vc2Vycy90b2JpYXNyZWljaC9TaXRlcy9KUy9iYXNpY0NvbnRleHQvc3JjL3NjcmlwdHMvb3ZlcmZsb3cuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0tDakNxQixZQUFZO0FBRXJCLFdBRlMsWUFBWSxDQUVwQixDQUFDLEVBQUUsS0FBSyxFQUFhOzs7T0FBWCxJQUFJLHlEQUFHLEVBQUU7O3lCQUZYLFlBQVk7O0FBSS9CLFFBQUssR0FBRyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUE7QUFDckIsT0FBSSxHQUFJLCtCQUFhLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQTs7QUFFOUIsT0FBSSxDQUFDLEVBQUUsR0FBUyxJQUFJLENBQUE7QUFDcEIsT0FBSSxDQUFDLEtBQUss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QUFDdkMsVUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQTs7QUFFdkMsU0FBTyxJQUFJLENBQUE7RUFFWCxDQUFBOzs7QUFFTSxLQUFNLEtBQUssR0FBRyxTQUFSLEtBQUssR0FBYzs7QUFFL0IsTUFBSSxRQUFRLElBQUUsSUFBSSxFQUFFLE9BQU8sS0FBSyxDQUFBOztBQUVoQyxVQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFBO0FBQ3ZDLFVBQVEsR0FBRyxJQUFJLENBQUE7O0FBRWYsU0FBTyxJQUFJLENBQUE7RUFFWCxDQUFBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG4ndXNlIHN0cmljdCc7XG52YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIHByb3BJc0VudW1lcmFibGUgPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xuXG5mdW5jdGlvbiB0b09iamVjdCh2YWwpIHtcblx0aWYgKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHVuZGVmaW5lZCkge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdC5hc3NpZ24gY2Fubm90IGJlIGNhbGxlZCB3aXRoIG51bGwgb3IgdW5kZWZpbmVkJyk7XG5cdH1cblxuXHRyZXR1cm4gT2JqZWN0KHZhbCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UpIHtcblx0dmFyIGZyb207XG5cdHZhciB0byA9IHRvT2JqZWN0KHRhcmdldCk7XG5cdHZhciBzeW1ib2xzO1xuXG5cdGZvciAodmFyIHMgPSAxOyBzIDwgYXJndW1lbnRzLmxlbmd0aDsgcysrKSB7XG5cdFx0ZnJvbSA9IE9iamVjdChhcmd1bWVudHNbc10pO1xuXG5cdFx0Zm9yICh2YXIga2V5IGluIGZyb20pIHtcblx0XHRcdGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGZyb20sIGtleSkpIHtcblx0XHRcdFx0dG9ba2V5XSA9IGZyb21ba2V5XTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuXHRcdFx0c3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZnJvbSk7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHN5bWJvbHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYgKHByb3BJc0VudW1lcmFibGUuY2FsbChmcm9tLCBzeW1ib2xzW2ldKSkge1xuXHRcdFx0XHRcdHRvW3N5bWJvbHNbaV1dID0gZnJvbVtzeW1ib2xzW2ldXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0bztcbn07XG4iLCJpbXBvcnQgKiBhcyBvdmVyZmxvdyBmcm9tICcuL292ZXJmbG93J1xuaW1wb3J0ICogYXMgY29vcmRpbmF0ZXMgZnJvbSAnLi9jb29yZGluYXRlcydcblxuaW1wb3J0IGJhc2ljQ29udGV4dEl0ZW0gZnJvbSAnLi9iYXNpY0NvbnRleHRJdGVtJ1xuaW1wb3J0IG9iamVjdEFzc2lnbiBmcm9tICdvYmplY3QtYXNzaWduJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBiYXNpY0NvbnRleHQge1xuXG5cdGNvbnN0cnVjdG9yKGUsIGl0ZW1zLCBvcHRzID0ge30pIHtcblxuXHRcdGl0ZW1zID0gaXRlbXMuc2xpY2UoKVxuXHRcdG9wdHMgID0gb2JqZWN0QXNzaWduKHt9LCBvcHRzKVxuXG5cdFx0dGhpcy5pZCAgICAgICA9IG51bGxcblx0XHR0aGlzLml0ZW1zICAgID0gaXRlbXNcblx0XHR0aGlzLm9wdHMgICAgID0gb3B0c1xuXHRcdHRoaXMucG9zaXRpb24gPSBudWxsXG5cdFx0dGhpcy5lbGVtICAgICA9IG51bGxcblxuXHRcdHRoaXMucGFyc2UgICA9IHRoaXMucGFyc2UuYmluZCh0aGlzKVxuXHRcdHRoaXMuYWN0aXZlICA9IHRoaXMuYWN0aXZlLmJpbmQodGhpcylcblx0XHR0aGlzLnZpc2libGUgPSB0aGlzLnZpc2libGUuYmluZCh0aGlzKVxuXHRcdHRoaXMuY2xvc2UgICA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKVxuXHRcdHRoaXMuc2hvdyAgICA9IHRoaXMuc2hvdy5iaW5kKHRoaXMpXG5cdFx0dGhpcy5zaG93U3ViID0gdGhpcy5zaG93U3ViLmJpbmQodGhpcylcblx0XHR0aGlzLmhpZGVTdWIgPSB0aGlzLmhpZGVTdWIuYmluZCh0aGlzKVxuXHRcdHRoaXMuY2xvc2UgICA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKVxuXG5cdFx0Ly8gR2VuZXJhdGUgdGhlIGlkIG9mIHRoZSBjb250ZXh0XG5cdFx0bGV0IGlkID0gdGhpcy5pZCA9ICtuZXcgRGF0ZSgpXG5cblx0XHQvLyBQYXJzZSB0aGUgb3B0aW9uc1xuXHRcdHRoaXMucGFyc2UoKVxuXG5cdFx0Ly8gU2F2ZSBjdXJyZW50IG92ZXJmbG93IGFuZCBibG9jayBzY3JvbGxpbmcgb2Ygc2l0ZVxuXHRcdG92ZXJmbG93LnNldCgpXG5cblx0XHQvLyBDcmVhdGUgaXRlbXNcblx0XHRpdGVtcy5mb3JFYWNoKChpdGVtLCBudW0pID0+IHtcblxuXHRcdFx0bGV0IHBhcmVudCA9IHRoaXMsXG5cdFx0XHQgICAgb3B0cyAgID0geyBudW0sIHBhcmVudCB9XG5cblx0XHRcdGl0ZW1zW251bV0gPSBuZXcgYmFzaWNDb250ZXh0SXRlbShpdGVtLCBvcHRzKVxuXG5cdFx0fSlcblxuXHRcdC8vIFJlbmRlciBhbmQgYWRkIGNvbnRleHQgdG8gdGhlIGJvZHlcblx0XHRpZiAob3B0cy5wYXJlbnQ9PW51bGwpIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCB0aGlzLnJlbmRlcigpKVxuXHRcdGVsc2UgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhc2ljQ29udGV4dENvbnRhaW5lcicpLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgdGhpcy5yZW5kZXIoKSlcblxuXHRcdC8vIFNlbGVjdCB0aGUgbmV3bHkgY3JlYXRlZCBjb250ZXh0XG5cdFx0bGV0IGVsZW0gPSB0aGlzLmVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuYmFzaWNDb250ZXh0W2RhdGEtaWQ9JyR7IGlkIH0nXWApXG5cblx0XHQvLyBDYWNoZSB0aGUgY29udGV4dFxuXHRcdHRoaXMubGluayhlbGVtKVxuXG5cdFx0Ly8gQ2FsY3VsYXRlIHBvc2l0aW9uXG5cdFx0bGV0IHBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbiA9IGNvb3JkaW5hdGVzLmdldChlLCBlbGVtKVxuXG5cdFx0Ly8gU2hvdyB0aGUgY29udGV4dFxuXHRcdG9wdHMuc2hvdygpXG5cblx0XHQvLyBCaW5kIGV2ZW50cyBvbiBjb250ZXh0XG5cdFx0dGhpcy5iaW5kKClcblxuXHRcdC8vIEJpbmQgZXZlbnRzIG9uIGl0ZW1zXG5cdFx0aXRlbXMuZm9yRWFjaCgoaXRlbSwgaSkgPT4ge1xuXG5cdFx0XHRsZXQgZWxlbSA9IHRoaXMuZWxlbS5xdWVyeVNlbGVjdG9yKGAuYmFzaWNDb250ZXh0X19pdGVtW2RhdGEtbnVtPSckeyBpIH0nXWApXG5cblx0XHRcdGl0ZW0ubGluayhlbGVtKVxuXHRcdFx0aXRlbS5iaW5kKClcblxuXHRcdH0pXG5cblx0XHQvLyBDYWxsIGNhbGxiYWNrIHdoZW4gYSBmdW5jdGlvblxuXHRcdG9wdHMuY2FsbGJhY2soKVxuXG5cdFx0Ly8gRG8gbm90IHRyaWdnZXIgZGVmYXVsdCBldmVudCBvciBmdXJ0aGVyIHByb3BhZ2F0aW9uXG5cdFx0aWYgKHR5cGVvZiBlLnByZXZlbnREZWZhdWx0ID09PSAnZnVuY3Rpb24nKSAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cdFx0aWYgKHR5cGVvZiBlLnN0b3BQcm9wYWdhdGlvbiA9PT0gJ2Z1bmN0aW9uJykgZS5zdG9wUHJvcGFnYXRpb24oKVxuXG5cdFx0cmV0dXJuIHRydWVcblxuXHR9XG5cblx0cGFyc2UoKSB7XG5cblx0XHRsZXQgb3B0cyA9IHRoaXMub3B0c1xuXG5cdFx0aWYgKG9wdHMucGFyZW50ICYmIG9wdHMucGFyZW50LmNvbnN0cnVjdG9yLm5hbWUhPT0nYmFzaWNDb250ZXh0Jykgb3B0cy5wYXJlbnQgPSBudWxsXG5cblx0XHRpZiAob3B0cy5jbGFzcz09bnVsbCkgb3B0cy5jbGFzcyA9ICcnXG5cdFx0aWYgKG9wdHMucGFyZW50IT1udWxsKSBvcHRzLmNsYXNzICs9ICcgYmFzaWNDb250ZXh0LS1jaGlsZCdcblxuXHRcdGlmICh0eXBlb2Ygb3B0cy5zaG93ICE9PSAnZnVuY3Rpb24nKSAgICAgb3B0cy5zaG93ICAgICA9IHRoaXMuc2hvd1xuXHRcdGlmICh0eXBlb2Ygb3B0cy5jbG9zZSAhPT0gJ2Z1bmN0aW9uJykgICAgb3B0cy5jbG9zZSAgICA9IHRoaXMuY2xvc2Vcblx0XHRpZiAodHlwZW9mIG9wdHMuY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIG9wdHMuY2FsbGJhY2sgPSAoKSA9PiB7fVxuXG5cdFx0cmV0dXJuIHRydWVcblxuXHR9XG5cblx0bGluayhlbGVtKSB7XG5cblx0XHR0aGlzLmVsZW0gPSBlbGVtXG5cblx0XHRyZXR1cm4gdHJ1ZVxuXG5cdH1cblxuXHRiaW5kKCkge1xuXG5cdFx0bGV0IGVsZW0gPSB0aGlzLmVsZW0sXG5cdFx0ICAgIG9wdHMgPSB0aGlzLm9wdHNcblxuXHRcdGlmIChvcHRzLnBhcmVudD09bnVsbCkge1xuXG5cdFx0XHRlbGVtLnBhcmVudEVsZW1lbnQub25jbGljayAgICAgICA9IG9wdHMuY2xvc2Vcblx0XHRcdGVsZW0ucGFyZW50RWxlbWVudC5vbmNvbnRleHRtZW51ID0gb3B0cy5jbG9zZVxuXG5cdFx0fVxuXG5cdFx0ZWxlbS5vbm1vdXNlZW50ZXIgPSAoKSA9PiB7XG5cblx0XHRcdGlmIChvcHRzLmNoaWxkIT1udWxsKSB0aGlzLmhpZGVTdWIoKVxuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRydWVcblxuXHR9XG5cblx0c2hvdygpIHtcblxuXHRcdGxldCBlbGVtICAgICA9IHRoaXMuZWxlbSxcblx0XHQgICAgcG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uXG5cblx0XHRlbGVtLnN0eWxlLnRvcCAgICAgICAgICAgICA9IGAkeyBwb3NpdGlvbi55IH1weGBcblx0XHRlbGVtLnN0eWxlLmxlZnQgICAgICAgICAgICA9IGAkeyBwb3NpdGlvbi54IH1weGBcblx0XHRlbGVtLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IGAkeyBwb3NpdGlvbi5yeCB9cHggJHsgcG9zaXRpb24ucnkgfXB4YFxuXHRcdGVsZW0uc3R5bGUub3BhY2l0eSAgICAgICAgID0gMVxuXG5cdFx0cmV0dXJuIHRydWVcblxuXHR9XG5cblx0c2hvd1N1YihpdGVtcywgaXRlbSkge1xuXG5cdFx0bGV0IG9wdHMgICAgID0gdGhpcy5vcHRzLFxuXHRcdCAgICBpdGVtU2l6ZSA9IGl0ZW0uZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuXG5cdFx0Ly8gRG9uJ3Qgb3BlbiBhIG5ldyBzdWItY29udGV4dCB3aGVuIGEgY2hpbGQgaXMgYWxyZWFkeSB2aXNpYmxlXG5cdFx0aWYgKG9wdHMuY2hpbGQhPW51bGwpIHJldHVybiBmYWxzZVxuXG5cdFx0bGV0IGNsb3NlID0gKCkgPT4ge1xuXG5cdFx0XHQvLyBPbmx5IGNsb3NlIHN1Yi1jb250ZXh0IHdoZW4gY3VycmVudCBjb250ZXh0IGhhcyBhIGNoaWxkXG5cdFx0XHRpZiAob3B0cy5jaGlsZCE9bnVsbCkge1xuXG5cdFx0XHRcdC8vIE9ubHkgY2xvc2UgY2hpbGQgd2hlbiBob3ZlcmVkIGl0ZW1cblx0XHRcdFx0Ly8gaXMgbm90IHRoZSB0cmlnZ2VyIG9mIHRoZSBzdWItY29udGV4dFxuXHRcdFx0XHRpZiAoaXRlbS5hY3RpdmUoKT09PWZhbHNlKSB7XG5cblx0XHRcdFx0XHQvLyBSZW1vdmUgaGlnaGxpZ2h0IGZyb20gaXRlbVxuXHRcdFx0XHRcdGl0ZW0uZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdiYXNpY0NvbnRleHRfX2l0ZW0tLWhvdmVyJylcblxuXHRcdFx0XHRcdG9wdHMuY2hpbGQuY2xvc2UoKVxuXHRcdFx0XHRcdHJldHVybiB0cnVlXG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdHRoaXMuY2xvc2UoKVxuXHRcdFx0XHRyZXR1cm4gdHJ1ZVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBmYWxzZVxuXG5cdFx0fVxuXG5cdFx0Ly8gU2hvdyB0aGUgc3ViLWNvbnRleHRcblx0XHRvcHRzLmNoaWxkID0gbmV3IGJhc2ljQ29udGV4dCh7XG5cdFx0XHRjbGllbnRYIDogaXRlbVNpemUubGVmdCArIGl0ZW1TaXplLndpZHRoLFxuXHRcdFx0Y2xpZW50WSA6IGl0ZW1TaXplLnRvcFxuXHRcdH0sIGl0ZW1zLCB7XG5cdFx0XHRwYXJlbnQgOiB0aGlzLFxuXHRcdFx0Y2xvc2UgIDogY2xvc2Vcblx0XHR9KVxuXG5cdFx0Ly8gSGlnaGxpZ2h0IGN1cnJlbnQgaXRlbVxuXHRcdGl0ZW0uZWxlbS5jbGFzc0xpc3QuYWRkKCdiYXNpY0NvbnRleHRfX2l0ZW0tLWhvdmVyJylcblxuXHRcdHJldHVybiB0cnVlXG5cblx0fVxuXG5cdGhpZGVTdWIoKSB7XG5cblx0XHRsZXQgb3B0cyA9IHRoaXMub3B0c1xuXG5cdFx0aWYgKG9wdHMuY2hpbGQ9PW51bGwpICAgICAgICAgICByZXR1cm4gZmFsc2Vcblx0XHRpZiAob3B0cy5jaGlsZC5hY3RpdmUoKT09PXRydWUpIHJldHVybiBmYWxzZVxuXG5cdFx0aWYgKG9wdHMuY2hpbGQub3B0cy5jbG9zZSgpPT09dHJ1ZSkgb3B0cy5jaGlsZCA9IG51bGxcblxuXHRcdHJldHVybiB0cnVlXG5cblx0fVxuXG5cdGFjdGl2ZSgpIHtcblxuXHRcdGxldCBpZCAgID0gdGhpcy5pZCxcblx0XHQgICAgZWxlbSA9IHRoaXMuZWxlbVxuXG5cdFx0cmV0dXJuIChlbGVtLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihgLmJhc2ljQ29udGV4dFtkYXRhLWlkPSckeyBpZCB9J106aG92ZXJgKT09bnVsbCA/IGZhbHNlIDogdHJ1ZSlcblxuXHR9XG5cblx0dmlzaWJsZSgpIHtcblxuXHRcdGxldCBlbGVtID0gdGhpcy5lbGVtXG5cblx0XHRpZiAoZWxlbT09bnVsbCB8fCBlbGVtLmxlbmd0aD09PTApIHJldHVybiBmYWxzZVxuXHRcdGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcblxuXHR9XG5cblx0Y2xvc2UoKSB7XG5cblx0XHRpZiAodGhpcy52aXNpYmxlKCk9PT1mYWxzZSkgcmV0dXJuIGZhbHNlXG5cblx0XHRsZXQgb3B0cyAgICAgID0gdGhpcy5vcHRzLFxuXHRcdCAgICBlbGVtICAgICAgPSB0aGlzLmVsZW0sXG5cdFx0ICAgIGNvbnRhaW5lciA9IGVsZW0ucGFyZW50RWxlbWVudFxuXG5cdFx0Ly8gQ2xvc2UgY2hpbGQgZmlyc3Rcblx0XHRpZiAob3B0cy5jaGlsZCE9bnVsbCkgb3B0cy5jaGlsZC5jbG9zZSgpXG5cblx0XHRpZiAob3B0cy5wYXJlbnQ9PW51bGwpIGNvbnRhaW5lci5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGNvbnRhaW5lcilcblx0XHRlbHNlICAgICAgICAgICAgICAgICAgIGVsZW0ucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChlbGVtKVxuXG5cdFx0Ly8gUmVzZXQgb3ZlcmZsb3cgdG8gaXRzIG9yaWdpbmFsIHZhbHVlXG5cdFx0b3ZlcmZsb3cucmVzZXQoKVxuXG5cdFx0cmV0dXJuIHRydWVcblxuXHR9XG5cblx0cmVuZGVyKCkge1xuXG5cdFx0bGV0IGlkICAgID0gdGhpcy5pZCxcblx0XHQgICAgaXRlbXMgPSB0aGlzLml0ZW1zLFxuXHRcdCAgICBvcHRzICA9IHRoaXMub3B0cyxcblx0XHQgICAgaHRtbCAgPSAnJ1xuXG5cdFx0Ly8gUmVuZGVyIGl0ZW1zXG5cdFx0aXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gaHRtbCArPSBpdGVtLnJlbmRlcigpKVxuXG5cdFx0Ly8gV3JhcCBjb250ZXh0IGFyb3VuZCBpdGVtc1xuXHRcdGh0bWwgPSB0aGlzLnJlbmRlckNvbnRleHQoaWQsIG9wdHMsIGh0bWwpXG5cblx0XHQvLyBXcmFwIGNvbnRhaW5lciBhcm91bmQgY29udGV4dCB3aGVuIGNvbnRleHQgaXMgbm90IGFuIHN1Yi1jb250ZXh0XG5cdFx0aWYgKG9wdHMucGFyZW50PT1udWxsKSBodG1sID0gdGhpcy5yZW5kZXJDb250YWluZXIoaHRtbClcblxuXHRcdHJldHVybiBodG1sXG5cblx0fVxuXG5cdHJlbmRlckNvbnRleHQoaWQsIG9wdHMsIGl0ZW1zSFRNTCkge1xuXG5cdFx0cmV0dXJuIGBcblx0XHQgICAgICAgPGRpdiBjbGFzcz1cImJhc2ljQ29udGV4dCAkeyBvcHRzLmNsYXNzIH1cIiBkYXRhLWlkPVwiJHsgaWQgfVwiPlxuXHRcdCAgICAgICAgICAgPHRhYmxlPlxuXHRcdCAgICAgICAgICAgICAgIDx0Ym9keT5cblx0XHQgICAgICAgICAgICAgICAgICAgJHsgaXRlbXNIVE1MIH1cblx0XHQgICAgICAgICAgICAgICA8L3Rib2R5PlxuXHRcdCAgICAgICAgICAgPC90YWJsZT5cblx0XHQgICAgICAgPC9kaXY+XG5cdFx0ICAgICAgIGBcblxuXHR9XG5cblx0cmVuZGVyQ29udGFpbmVyKGNvbnRleHRIVE1MKSB7XG5cblx0XHRyZXR1cm4gYFxuXHRcdCAgICAgICA8ZGl2IGNsYXNzPVwiYmFzaWNDb250ZXh0Q29udGFpbmVyXCI+XG5cdFx0ICAgICAgICAgICAkeyBjb250ZXh0SFRNTCB9XG5cdFx0ICAgICAgIDwvZGl2PlxuXHRcdCAgICAgICBgXG5cblx0fVxuXG59IiwiaW1wb3J0IG9iamVjdEFzc2lnbiBmcm9tICdvYmplY3QtYXNzaWduJ1xuXG5jb25zdCBJVEVNICAgICAgPSAnSVRFTScsXG4gICAgICBTRVBBUkFUT1IgPSAnU0VQQVJBVE9SJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBiYXNpY0NvbnRleHRJdGVtIHtcblxuXHRjb25zdHJ1Y3RvcihpdGVtID0ge30sIG9wdHMgPSB7fSkge1xuXG5cdFx0aXRlbSA9IG9iamVjdEFzc2lnbih7fSwgaXRlbSlcblx0XHRvcHRzID0gb2JqZWN0QXNzaWduKHt9LCBvcHRzKVxuXG5cdFx0dGhpcy5pdGVtICAgPSBpdGVtXG5cdFx0dGhpcy5vcHRzICAgPSBvcHRzXG5cdFx0dGhpcy5lbGVtICAgPSBudWxsXG5cblx0XHR0aGlzLnBhcnNlICA9IHRoaXMucGFyc2UuYmluZCh0aGlzKVxuXHRcdHRoaXMubGluayAgID0gdGhpcy5saW5rLmJpbmQodGhpcylcblx0XHR0aGlzLmJpbmQgICA9IHRoaXMuYmluZC5iaW5kKHRoaXMpXG5cdFx0dGhpcy5hY3RpdmUgPSB0aGlzLmFjdGl2ZS5iaW5kKHRoaXMpXG5cdFx0dGhpcy5yZW5kZXIgPSB0aGlzLnJlbmRlci5iaW5kKHRoaXMpXG5cblx0XHR0aGlzLnBhcnNlKClcblxuXHRcdHJldHVybiB0cnVlXG5cblx0fVxuXG5cdHBhcnNlKCkge1xuXG5cdFx0bGV0IGl0ZW0gPSB0aGlzLml0ZW1cblxuXHRcdC8vIFNldCBkZWZhdWx0IHZhbHVlc1xuXHRcdGlmIChpdGVtLnR5cGU9PW51bGwpICAgIGl0ZW0udHlwZSAgICA9IChPYmplY3Qua2V5cyhpdGVtKS5sZW5ndGg9PT0wID8gU0VQQVJBVE9SIDogSVRFTSlcblx0XHRpZiAoaXRlbS5jb250ZW50PT1udWxsKSBpdGVtLmNvbnRlbnQgPSAnVW5kZWZpbmVkJ1xuXHRcdGlmIChpdGVtLmNsYXNzPT1udWxsKSAgIGl0ZW0uY2xhc3MgICA9ICcnXG5cblx0XHQvLyBTZXQgZGVmYXVsdCBmdW5jdGlvbiB3aGVuIGZuIGlzIG1pc3Npbmdcblx0XHRpZiAodHlwZW9mIGl0ZW0uZm4gIT09ICdmdW5jdGlvbicpIGl0ZW0uZm4gPSAoKSA9PiB7fVxuXG5cdFx0Ly8gQWRkIGRpc2FibGVkIGNsYXNzIHdoZW4gaXRlbSBkaXNhYmxlZFxuXHRcdGlmIChpdGVtLmRpc2FibGVkIT09dHJ1ZSkgaXRlbS5kaXNhYmxlZCA9IGZhbHNlXG5cdFx0aWYgKGl0ZW0uZGlzYWJsZWQ9PT10cnVlKSBpdGVtLmNsYXNzICs9ICcgYmFzaWNDb250ZXh0X19pdGVtLS1kaXNhYmxlZCdcblxuXHRcdC8vIEFkZCBpbnZpc2libGUgY2xhc3Mgd2hlbiBpbnZpc2libGVcblx0XHRpZiAoaXRlbS52aXNpYmxlIT09ZmFsc2UpIGl0ZW0udmlzaWJsZSA9IHRydWVcblx0XHRpZiAoaXRlbS52aXNpYmxlPT09ZmFsc2UpIGl0ZW0uY2xhc3MgKz0gJyBiYXNpY0NvbnRleHRfX2l0ZW0tLWludmlzaWJsZSdcblxuXHRcdGxldCBvcHRzID0gdGhpcy5vcHRzXG5cblx0XHRpZiAob3B0cy5wYXJlbnQgJiYgb3B0cy5wYXJlbnQuY29uc3RydWN0b3IubmFtZSE9PSdiYXNpY0NvbnRleHQnKSBvcHRzLnBhcmVudCA9IG51bGxcblxuXHRcdHJldHVybiB0cnVlXG5cblx0fVxuXG5cdGxpbmsoZWxlbSkge1xuXG5cdFx0dGhpcy5lbGVtID0gZWxlbVxuXG5cdFx0cmV0dXJuIHRydWVcblxuXHR9XG5cblx0YmluZCgpIHtcblxuXHRcdGxldCBpdGVtID0gdGhpcy5pdGVtLFxuXHRcdCAgICBvcHRzID0gdGhpcy5vcHRzLFxuXHRcdCAgICBlbGVtID0gdGhpcy5lbGVtXG5cblx0XHRpZiAoZWxlbT09bnVsbCkgICAgICAgICAgIHJldHVybiBmYWxzZVxuXHRcdGlmIChpdGVtLmRpc2FibGVkPT09dHJ1ZSkgcmV0dXJuIGZhbHNlXG5cblx0XHRlbGVtLm9uY2xpY2sgICAgICAgPSBpdGVtLmZuXG5cdFx0ZWxlbS5vbmNvbnRleHRtZW51ID0gaXRlbS5mblxuXG5cdFx0aWYgKGl0ZW0uaXRlbXMhPW51bGwpIHtcblxuXHRcdFx0bGV0IHRpbWVvdXQgPSBudWxsXG5cblx0XHRcdGVsZW0ub25tb3VzZWVudGVyID0gKCkgPT4ge1xuXHRcdFx0XHRjbGVhclRpbWVvdXQodGltZW91dClcblx0XHRcdFx0dGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gb3B0cy5wYXJlbnQuc2hvd1N1YihpdGVtLml0ZW1zLCB0aGlzKSwgMTUwKVxuXHRcdFx0fVxuXG5cdFx0XHRlbGVtLm9ubW91c2VsZWF2ZSA9ICgpID0+IHtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpXG5cdFx0XHRcdG9wdHMucGFyZW50LmhpZGVTdWIoKVxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRydWVcblxuXHR9XG5cblx0YWN0aXZlKCkge1xuXG5cdFx0bGV0IG9wdHMgPSB0aGlzLm9wdHMsXG5cdFx0ICAgIGVsZW0gPSB0aGlzLmVsZW1cblxuXHRcdHJldHVybiAoZWxlbS5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC5iYXNpY0NvbnRleHRfX2l0ZW1bZGF0YS1udW09JyR7IG9wdHMubnVtIH0nXTpob3ZlcmApPT1udWxsID8gZmFsc2UgOiB0cnVlKVxuXG5cdH1cblxuXHRyZW5kZXIoKSB7XG5cblx0XHRsZXQgaXRlbSA9IHRoaXMuaXRlbSxcblx0XHQgICAgb3B0cyA9IHRoaXMub3B0c1xuXG5cdFx0aWYgKGl0ZW0udHlwZT09PUlURU0pIHtcblxuXHRcdFx0cmV0dXJuIGBcblx0XHRcdCAgICAgICA8dHIgY2xhc3M9XCJiYXNpY0NvbnRleHRfX2l0ZW0gJHsgaXRlbS5jbGFzcyB9XCIgZGF0YS1udW09XCIkeyBvcHRzLm51bSB9XCI+XG5cdFx0XHQgICAgICAgICAgIDx0ZCBjbGFzcz0nYmFzaWNDb250ZXh0X19kYXRhJz4keyBpdGVtLmNvbnRlbnQgfTwvdGQ+XG5cdFx0XHQgICAgICAgPC90cj5cblx0XHRcdCAgICAgICBgXG5cblx0XHR9XG5cblx0XHRpZiAoaXRlbS50eXBlPT09U0VQQVJBVE9SKSB7XG5cblx0XHRcdHJldHVybiBgXG5cdFx0XHQgICAgICAgPHRyIGNsYXNzPVwiYmFzaWNDb250ZXh0X19pdGVtIGJhc2ljQ29udGV4dF9faXRlbS0tc2VwYXJhdG9yXCI+PC90cj5cblx0XHRcdCAgICAgICBgXG5cblx0XHR9XG5cblx0fVxuXG59IiwiY29uc3Qgbm9ybWFsaXplID0gZnVuY3Rpb24oZSA9IHt9KSB7XG5cblx0bGV0IHBvcyA9IHtcblx0XHR4IDogZS5jbGllbnRYLFxuXHRcdHkgOiBlLmNsaWVudFlcblx0fVxuXG5cdGlmIChlLnR5cGU9PT0ndG91Y2hlbmQnICYmIChwb3MueD09bnVsbCB8fCBwb3MueT09bnVsbCkpIHtcblxuXHRcdC8vIFdlIG5lZWQgdG8gY2FwdHVyZSBjbGllbnRYIGFuZCBjbGllbnRZIGZyb20gb3JpZ2luYWwgZXZlbnRcblx0XHQvLyB3aGVuIHRoZSBldmVudCAndG91Y2hlbmQnIGRvZXMgbm90IHJldHVybiB0aGUgdG91Y2ggcG9zaXRpb25cblxuXHRcdGxldCB0b3VjaGVzID0gZS5jaGFuZ2VkVG91Y2hlc1xuXG5cdFx0aWYgKHRvdWNoZXMhPW51bGwgJiYgdG91Y2hlcy5sZW5ndGg+MCkge1xuXHRcdFx0cG9zLnggPSB0b3VjaGVzWzBdLmNsaWVudFhcblx0XHRcdHBvcy55ID0gdG91Y2hlc1swXS5jbGllbnRZXG5cdFx0fVxuXG5cdH1cblxuXHQvLyBQb3NpdGlvbiB1bmtub3duXG5cdGlmIChwb3MueD09bnVsbCB8fCBwb3MueCA8IDApIHBvcy54ID0gMFxuXHRpZiAocG9zLnk9PW51bGwgfHwgcG9zLnkgPCAwKSBwb3MueSA9IDBcblxuXHRyZXR1cm4gcG9zXG5cbn1cblxuZXhwb3J0IGNvbnN0IGdldCA9IGZ1bmN0aW9uKGUsIGVsZW0pIHtcblxuXHRsZXQgbm9ybWFsaXplZFBvc2l0aW9uID0gbm9ybWFsaXplKGUpXG5cblx0Ly8gU2V0IHRoZSBpbml0aWFsIHBvc2l0aW9uXG5cdGxldCB4ID0gbm9ybWFsaXplZFBvc2l0aW9uLngsXG5cdCAgICB5ID0gbm9ybWFsaXplZFBvc2l0aW9uLnlcblxuXHQvLyBHZXQgc2l6ZSBvZiBicm93c2VyXG5cdGxldCBicm93c2VyU2l6ZSA9IHtcblx0XHR3aWR0aCAgOiB3aW5kb3cuaW5uZXJXaWR0aCxcblx0XHRoZWlnaHQgOiB3aW5kb3cuaW5uZXJIZWlnaHRcblx0fVxuXG5cdC8vIEdldCBzaXplIG9mIGVsZW1cblx0bGV0IGVsZW1TaXplID0ge1xuXHRcdHdpZHRoICA6IGVsZW0ub2Zmc2V0V2lkdGgsXG5cdFx0aGVpZ2h0IDogZWxlbS5vZmZzZXRIZWlnaHRcblx0fVxuXG5cdC8vIEZpeCBwb3NpdGlvbiBiYXNlZCBvbiBlbGVtIGFuZCBicm93c2VyIHNpemVcblx0aWYgKCh4ICsgZWxlbVNpemUud2lkdGgpID4gYnJvd3NlclNpemUud2lkdGgpICAgeCA9IHggLSAoKHggKyBlbGVtU2l6ZS53aWR0aCkgLSBicm93c2VyU2l6ZS53aWR0aClcblx0aWYgKCh5ICsgZWxlbVNpemUuaGVpZ2h0KSA+IGJyb3dzZXJTaXplLmhlaWdodCkgeSA9IHkgLSAoKHkgKyBlbGVtU2l6ZS5oZWlnaHQpIC0gYnJvd3NlclNpemUuaGVpZ2h0KVxuXG5cdC8vIE1ha2UgZWxlbSBzY3JvbGxhYmxlIGFuZCBzdGFydCBhdCB0aGUgdG9wIG9mIHRoZSBicm93c2VyXG5cdC8vIHdoZW4gZWxlbSBpcyBoaWdoZXIgdGhhbiB0aGUgYnJvd3NlclxuXHRpZiAoZWxlbVNpemUuaGVpZ2h0ID4gYnJvd3NlclNpemUuaGVpZ2h0KSB7XG5cdFx0eSA9IDBcblx0XHRlbGVtLmNsYXNzTGlzdC5hZGQoJ2Jhc2ljQ29udGV4dC0tc2Nyb2xsYWJsZScpXG5cdH1cblxuXHQvLyBDYWxjdWxhdGUgdGhlIHJlbGF0aXZlIHBvc2l0aW9uIG9mIHRoZSBtb3VzZSB0byB0aGUgZWxlbVxuXHRsZXQgcnggPSBub3JtYWxpemVkUG9zaXRpb24ueCAtIHgsXG5cdCAgICByeSA9IG5vcm1hbGl6ZWRQb3NpdGlvbi55IC0geVxuXG5cdHJldHVybiB7IHgsIHksIHJ4LCByeSB9XG5cbn0iLCJsZXQgb3ZlcmZsb3cgPSBudWxsXG5cbmV4cG9ydCBjb25zdCBzZXQgPSBmdW5jdGlvbigpIHtcblxuXHRpZiAob3ZlcmZsb3chPW51bGwpIHJldHVybiBmYWxzZVxuXG5cdG92ZXJmbG93ID0gZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvd1xuXHRkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbidcblxuXHRyZXR1cm4gdHJ1ZVxuXG59XG5cbmV4cG9ydCBjb25zdCByZXNldCA9IGZ1bmN0aW9uKCkge1xuXG5cdGlmIChvdmVyZmxvdz09bnVsbCkgcmV0dXJuIGZhbHNlXG5cblx0ZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IG92ZXJmbG93XG5cdG92ZXJmbG93ID0gbnVsbFxuXG5cdHJldHVybiB0cnVlXG5cbn0iXX0=
