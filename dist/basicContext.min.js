"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):window[t]=e()}("basicContext",function(){var t=null,e="ITEM",n="SEPARATOR",i=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return t.type=0===Object.keys(t).length?n:e,null==t["class"]&&(t["class"]=""),t.visible!==!1&&(t.visible=!0),null==t.content&&(t.content="Undefined"),t.disabled!==!0&&(t.disabled=!1),t.disabled===!0&&(t["class"]+=" basicContext__item--disabled"),"function"!=typeof t.fn&&t.type!==n&&t.disabled===!1&&(console.warn("Missing fn for item '"+t.content+"'"),t=null),t},o=function(t,e){return e.parentElement.onclick=t,e.parentElement.oncontextmenu=t,!0},r=function(t,e){return null==e?!1:t.visible===!1?!1:t.disabled===!0?!1:(e.onclick=t.fn,e.oncontextmenu=t.fn,null!=t.items&&!function(){var n=null;e.onmouseenter=function(){clearTimeout(n),n=setTimeout(function(){return h(t.items,e)},150)},e.onmouseleave=function(){clearTimeout(n)}}(),!0)},l=function(t,e,n){return e.onmouseleave=function(){return n.active()===!0?!1:void t()},!0},s=function(){return null!=t?!1:(t=document.body.style.overflow,document.body.style.overflow="hidden",!0)},a=function(){return null==t?!1:(document.body.style.overflow=t,t=null,!0)},u=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e={x:t.clientX,y:t.clientY};if("touchend"===t.type&&(null==e.x||null==e.y)){var n=t.changedTouches;null!=n&&n.length>0&&(e.x=n[0].clientX,e.y=n[0].clientY)}return(null==e.x||e.x<0)&&(e.x=0),(null==e.y||e.y<0)&&(e.y=0),e},c=function(t,e){var n=t.x,i=t.y,o={width:window.innerWidth,height:window.innerHeight},r={width:e.offsetWidth,height:e.offsetHeight};n+r.width>o.width&&(n-=n+r.width-o.width),i+r.height>o.height&&(i-=i+r.height-o.height),r.height>o.height&&(i=0,e.classList.add("basicContext--scrollable"));var l=t.x-n,s=t.y-i;return{x:n,y:i,rx:l,ry:s}},d=function(t,e){return e.style.top=t.y+"px",e.style.left=t.x+"px",e.style.transformOrigin=t.rx+"px "+t.ry+"px",e.style.opacity=1,!0},f=function(t,e){return e.style.top=t.top+"px",e.style.left=t.left+"px",e.style.width=t.width+"px",e.style.height=t.height+"px",!0},h=function(t,e){var n=e.getBoundingClientRect(),i=function(t){e.classList.remove("basicContext__item--hover"),t.close()},o={clientX:n.left+n.width,clientY:n.top},r={source:n,close:i};new b(o,t,r),e.classList.add("basicContext__item--hover")},m=function(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return'\n	       <div class="basicContextContainer">\n	           <div class="basicContext" data-id="'+t+'"">\n	               <table>\n	                   <tbody>\n	                   		'+e+"\n	                   </tbody>\n	               </table>\n	           </div>\n	       </div>\n	       "},v=function(t,i){var o="";return null===t?"":t.visible===!1?"":(t.num=i,t.type===e?o='\n		       <tr class="basicContext__item '+t["class"]+'" data-num="'+t.num+"\">\n		           <td class='basicContext__data'>"+t.content+"</td>\n		       </tr>\n		       ":t.type===n&&(o='\n		       <tr class="basicContext__item basicContext__item--separator"></tr>\n		       '),o)},y=function(){return'<div class="basicContextContainer__placeholder"></div>'},b=function(){function t(e,n){var a=this,h=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];_classCallCheck(this,t),this.dom=this.dom.bind(this),this.active=this.active.bind(this),this.visible=this.visible.bind(this),this.close=this.close.bind(this),this.id=+new Date,s(),n.forEach(function(t,e){return n[e]=i(t)});var b="";n.forEach(function(t,e){return b+=v(t,e)}),b=m(this.id,b),document.body.insertAdjacentHTML("beforeend",b);var p=this.dom(),g=u(e),x=c(g,p);"function"==typeof h.show?h.show(x,p):d(x,p);var C=null;if(C="function"==typeof h.close?function(){return h.close(a)}:function(){return a.close(a)},o(C,p),n.forEach(function(t){return r(t,a.dom(".basicContext__item[data-num='"+t.num+"']"))}),null!=h.source){var w=this.dom().parentElement;w.insertAdjacentHTML("beforeend",y());var _=w.querySelector(".basicContextContainer__placeholder");f(h.source,_),l(C,_,this)}return"function"==typeof e.preventDefault&&e.preventDefault(),"function"==typeof e.stopPropagation&&e.stopPropagation(),"function"==typeof h.callback&&h.callback(),!0}return _createClass(t,[{key:"dom",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return document.querySelector(".basicContext[data-id='"+this.id+"'] "+t)}},{key:"active",value:function(){return null==this.dom().parentElement.querySelector(".basicContext:hover")?!1:!0}},{key:"visible",value:function(){var t=this.dom();return null==t||0===t.length?!1:!0}},{key:"close",value:function(){if(this.visible()===!1)return!1;var t=this.dom().parentElement;return t.parentElement.removeChild(t),a(),!0}}]),t}();return b});