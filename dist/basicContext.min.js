(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.basicContext = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/* eslint-disable no-unused-vars */
'use strict';
var hasOwnProperty = Object.prototype.hasOwnProperty;
var propIsEnumerable = Object.prototype.propertyIsEnumerable;

function toObject(val) {
	if (val === null || val === undefined) {
		throw new TypeError('Object.assign cannot be called with null or undefined');
	}

	return Object(val);
}

module.exports = Object.assign || function (target, source) {
	var from;
	var to = toObject(target);
	var symbols;

	for (var s = 1; s < arguments.length; s++) {
		from = Object(arguments[s]);

		for (var key in from) {
			if (hasOwnProperty.call(from, key)) {
				to[key] = from[key];
			}
		}

		if (Object.getOwnPropertySymbols) {
			symbols = Object.getOwnPropertySymbols(from);
			for (var i = 0; i < symbols.length; i++) {
				if (propIsEnumerable.call(from, symbols[i])) {
					to[symbols[i]] = from[symbols[i]];
				}
			}
		}
	}

	return to;
};

},{}],2:[function(require,module,exports){
(function (global, factory) {
	if (typeof define === 'function' && define.amd) {
		define(['exports', 'module', './overflow', './coordinates', './basicContextItem', 'object-assign'], factory);
	} else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {
		factory(exports, module, require('./overflow'), require('./coordinates'), require('./basicContextItem'), require('object-assign'));
	} else {
		var mod = {
			exports: {}
		};
		factory(mod.exports, mod, global.overflow, global.coordinates, global.basicContextItem, global.objectAssign);
		global.basicContext = mod.exports;
	}
})(this, function (exports, module, _overflow, _coordinates, _basicContextItem, _objectAssign) {
	'use strict';

	var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

	var _basicContextItem2 = _interopRequireDefault(_basicContextItem);

	var _objectAssign2 = _interopRequireDefault(_objectAssign);

	var basicContext = (function () {
		function basicContext(e, items) {
			var _this = this;

			var opts = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];

			_classCallCheck(this, basicContext);

			items = items.slice();
			opts = (0, _objectAssign2['default'])({}, opts);

			this.id = null;
			this.items = items;
			this.opts = opts;
			this.position = null;
			this.elem = null;

			this.parse = this.parse.bind(this);
			this.active = this.active.bind(this);
			this.visible = this.visible.bind(this);
			this.close = this.close.bind(this);
			this.show = this.show.bind(this);
			this.showSub = this.showSub.bind(this);
			this.hideSub = this.hideSub.bind(this);
			this.close = this.close.bind(this);

			// Generate the id of the context
			var id = this.id = +new Date();

			// Parse the options
			this.parse();

			// Save current overflow and block scrolling of site
			_overflow.set();

			// Create items
			items.forEach(function (item, num) {

				var parent = _this,
				    opts = { num: num, parent: parent };

				items[num] = new _basicContextItem2['default'](item, opts);
			});

			// Render and add context to the body
			if (opts.parent == null) document.body.insertAdjacentHTML('beforeend', this.render());else document.querySelector('.basicContextContainer').insertAdjacentHTML('beforeend', this.render());

			// Select the newly created context
			var elem = this.elem = document.querySelector('.basicContext[data-id=\'' + id + '\']');

			// Cache the context
			this.link(elem);

			// Calculate position
			var position = this.position = _coordinates.get(e, elem);

			// Show the context
			opts.show();

			// Bind events on context
			this.bind();

			// Bind events on items
			items.forEach(function (item, i) {

				var elem = _this.elem.querySelector('.basicContext__item[data-num=\'' + i + '\']');

				item.link(elem);
				item.bind();
			});

			// Call callback when a function
			opts.callback();

			// Do not trigger default event or further propagation
			if (typeof e.preventDefault === 'function') e.preventDefault();
			if (typeof e.stopPropagation === 'function') e.stopPropagation();

			return true;
		}

		_createClass(basicContext, [{
			key: 'parse',
			value: function parse() {

				var opts = this.opts;

				if (opts.parent && opts.parent.constructor.name !== 'basicContext') opts.parent = null;

				if (opts['class'] == null) opts['class'] = '';
				if (opts.parent != null) opts['class'] += ' basicContext--child';

				if (typeof opts.show !== 'function') opts.show = this.show;
				if (typeof opts.close !== 'function') opts.close = this.close;
				if (typeof opts.callback !== 'function') opts.callback = function () {};

				return true;
			}
		}, {
			key: 'link',
			value: function link(elem) {

				this.elem = elem;

				return true;
			}
		}, {
			key: 'bind',
			value: function bind() {
				var _this2 = this;

				var elem = this.elem,
				    opts = this.opts;

				if (opts.parent == null) {

					elem.parentElement.onclick = opts.close;
					elem.parentElement.oncontextmenu = opts.close;
				}

				elem.onmouseenter = function () {

					if (opts.child != null) _this2.hideSub();
				};

				return true;
			}
		}, {
			key: 'show',
			value: function show() {

				var elem = this.elem,
				    position = this.position;

				elem.style.top = position.y + 'px';
				elem.style.left = position.x + 'px';
				elem.style.transformOrigin = position.rx + 'px ' + position.ry + 'px';
				elem.style.opacity = 1;

				return true;
			}
		}, {
			key: 'showSub',
			value: function showSub(items, item) {
				var _this3 = this;

				var opts = this.opts,
				    itemSize = item.elem.getBoundingClientRect();

				// Don't open a new child when a child is already visible
				if (opts.child != null) return false;

				var close = function close() {

					if (opts.child != null) {

						// Only close child when hovered item
						// is not the producer of the child
						if (item.active() === false) {

							// Remove highlight from item
							item.elem.classList.remove('basicContext__item--hover');

							opts.child.close();
							return true;
						}
					} else {

						_this3.close();
						return true;
					}

					return false;
				};

				opts.child = new basicContext({
					clientX: itemSize.left + itemSize.width,
					clientY: itemSize.top
				}, items, {
					parent: this,
					close: close
				});

				// Highlight current item
				item.elem.classList.add('basicContext__item--hover');

				return true;
			}
		}, {
			key: 'hideSub',
			value: function hideSub() {

				var opts = this.opts;

				if (opts.child == null) return false;
				if (opts.child.active() === true) return false;

				if (opts.child.opts.close() === true) opts.child = null;

				return true;
			}
		}, {
			key: 'active',
			value: function active() {

				var id = this.id,
				    elem = this.elem;

				return elem.parentElement.querySelector('.basicContext[data-id=\'' + id + '\']:hover') == null ? false : true;
			}
		}, {
			key: 'visible',
			value: function visible() {

				var elem = this.elem;

				if (elem == null || elem.length === 0) return false;else return true;
			}
		}, {
			key: 'close',
			value: function close() {

				if (this.visible() === false) return false;

				var opts = this.opts,
				    elem = this.elem,
				    container = elem.parentElement;

				// Close child first
				if (opts.child != null) opts.child.close();

				if (opts.parent == null) container.parentElement.removeChild(container);else elem.parentElement.removeChild(elem);

				// Reset overflow to its original value
				_overflow.reset();

				return true;
			}
		}, {
			key: 'render',
			value: function render() {

				var id = this.id,
				    items = this.items,
				    opts = this.opts,
				    html = '';

				// Render items
				items.forEach(function (item) {
					return html += item.render();
				});

				// Wrap context around items
				html = this.renderContext(id, opts, html);

				// Wrap container around context when context is not a child
				if (opts.parent == null) html = this.renderContainer(html);

				return html;
			}
		}, {
			key: 'renderContext',
			value: function renderContext(id, opts, itemsHTML) {

				return '\n\t\t       <div class="basicContext ' + opts['class'] + '" data-id="' + id + '">\n\t\t           <table>\n\t\t               <tbody>\n\t\t                   ' + itemsHTML + '\n\t\t               </tbody>\n\t\t           </table>\n\t\t       </div>\n\t\t       ';
			}
		}, {
			key: 'renderContainer',
			value: function renderContainer(contextHTML) {

				return '\n\t\t       <div class="basicContextContainer">\n\t\t           ' + contextHTML + '\n\t\t       </div>\n\t\t       ';
			}
		}]);

		return basicContext;
	})();

	module.exports = basicContext;
});

},{"./basicContextItem":3,"./coordinates":4,"./overflow":5,"object-assign":1}],3:[function(require,module,exports){
(function (global, factory) {
	if (typeof define === 'function' && define.amd) {
		define(['exports', 'module', 'object-assign'], factory);
	} else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {
		factory(exports, module, require('object-assign'));
	} else {
		var mod = {
			exports: {}
		};
		factory(mod.exports, mod, global.objectAssign);
		global.basicContextItem = mod.exports;
	}
})(this, function (exports, module, _objectAssign) {
	'use strict';

	var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

	var _objectAssign2 = _interopRequireDefault(_objectAssign);

	var ITEM = 'ITEM',
	    SEPARATOR = 'SEPARATOR';

	var basicContextItem = (function () {
		function basicContextItem() {
			var item = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];
			var opts = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

			_classCallCheck(this, basicContextItem);

			item = (0, _objectAssign2['default'])({}, item);
			opts = (0, _objectAssign2['default'])({}, opts);

			this.item = item;
			this.opts = opts;
			this.elem = null;

			this.parse = this.parse.bind(this);
			this.link = this.link.bind(this);
			this.bind = this.bind.bind(this);
			this.active = this.active.bind(this);
			this.render = this.render.bind(this);

			this.parse();

			return true;
		}

		_createClass(basicContextItem, [{
			key: 'parse',
			value: function parse() {

				var item = this.item;

				// Set default values
				if (item.type == null) item.type = Object.keys(item).length === 0 ? SEPARATOR : ITEM;
				if (item.content == null) item.content = 'Undefined';
				if (item['class'] == null) item['class'] = '';

				// Set default function when fn is missing
				if (typeof item.fn !== 'function') item.fn = function () {};

				// Add disabled class when item disabled
				if (item.disabled !== true) item.disabled = false;
				if (item.disabled === true) item['class'] += ' basicContext__item--disabled';

				// Add invisible class when invisible
				if (item.visible !== false) item.visible = true;
				if (item.visible === false) item['class'] += ' basicContext__item--invisible';

				var opts = this.opts;

				if (opts.parent && opts.parent.constructor.name !== 'basicContext') opts.parent = null;

				return true;
			}
		}, {
			key: 'link',
			value: function link(elem) {

				this.elem = elem;

				return true;
			}
		}, {
			key: 'bind',
			value: function bind() {
				var _this = this;

				var item = this.item,
				    opts = this.opts,
				    elem = this.elem;

				if (elem == null) return false;
				if (item.disabled === true) return false;

				elem.onclick = item.fn;
				elem.oncontextmenu = item.fn;

				if (item.items != null) {
					(function () {

						var timeout = null;

						elem.onmouseenter = function () {
							clearTimeout(timeout);
							timeout = setTimeout(function () {
								return opts.parent.showSub(item.items, _this);
							}, 150);
						};

						elem.onmouseleave = function () {
							clearTimeout(timeout);
							opts.parent.hideSub();
						};
					})();
				}

				return true;
			}
		}, {
			key: 'active',
			value: function active() {

				var opts = this.opts,
				    elem = this.elem;

				return elem.parentElement.querySelector('.basicContext__item[data-num=\'' + opts.num + '\']:hover') == null ? false : true;
			}
		}, {
			key: 'render',
			value: function render() {

				var item = this.item,
				    opts = this.opts;

				if (item.type === ITEM) {

					return '\n\t\t\t       <tr class="basicContext__item ' + item['class'] + '" data-num="' + opts.num + '">\n\t\t\t           <td class=\'basicContext__data\'>' + item.content + '</td>\n\t\t\t       </tr>\n\t\t\t       ';
				}

				if (item.type === SEPARATOR) {

					return '\n\t\t\t       <tr class="basicContext__item basicContext__item--separator"></tr>\n\t\t\t       ';
				}
			}
		}]);

		return basicContextItem;
	})();

	module.exports = basicContextItem;
});

},{"object-assign":1}],4:[function(require,module,exports){
(function (global, factory) {
	if (typeof define === 'function' && define.amd) {
		define(['exports'], factory);
	} else if (typeof exports !== 'undefined') {
		factory(exports);
	} else {
		var mod = {
			exports: {}
		};
		factory(mod.exports);
		global.coordinates = mod.exports;
	}
})(this, function (exports) {
	'use strict';

	Object.defineProperty(exports, '__esModule', {
		value: true
	});
	var normalize = function normalize() {
		var e = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

		var pos = {
			x: e.clientX,
			y: e.clientY
		};

		if (e.type === 'touchend' && (pos.x == null || pos.y == null)) {

			// We need to capture clientX and clientY from original event
			// when the event 'touchend' does not return the touch position

			var touches = e.changedTouches;

			if (touches != null && touches.length > 0) {
				pos.x = touches[0].clientX;
				pos.y = touches[0].clientY;
			}
		}

		// Position unknown
		if (pos.x == null || pos.x < 0) pos.x = 0;
		if (pos.y == null || pos.y < 0) pos.y = 0;

		return pos;
	};

	var get = function get(e, elem) {

		var normalizedPosition = normalize(e);

		// Set the initial position
		var x = normalizedPosition.x,
		    y = normalizedPosition.y;

		// Get size of browser
		var browserSize = {
			width: window.innerWidth,
			height: window.innerHeight
		};

		// Get size of elem
		var elemSize = {
			width: elem.offsetWidth,
			height: elem.offsetHeight
		};

		// Fix position based on elem and browser size
		if (x + elemSize.width > browserSize.width) x = x - (x + elemSize.width - browserSize.width);
		if (y + elemSize.height > browserSize.height) y = y - (y + elemSize.height - browserSize.height);

		// Make elem scrollable and start at the top of the browser
		// when elem is higher than the browser
		if (elemSize.height > browserSize.height) {
			y = 0;
			elem.classList.add('basicContext--scrollable');
		}

		// Calculate the relative position of the mouse to the elem
		var rx = normalizedPosition.x - x,
		    ry = normalizedPosition.y - y;

		return { x: x, y: y, rx: rx, ry: ry };
	};
	exports.get = get;
});

},{}],5:[function(require,module,exports){
(function (global, factory) {
	if (typeof define === 'function' && define.amd) {
		define(['exports'], factory);
	} else if (typeof exports !== 'undefined') {
		factory(exports);
	} else {
		var mod = {
			exports: {}
		};
		factory(mod.exports);
		global.overflow = mod.exports;
	}
})(this, function (exports) {
	'use strict';

	Object.defineProperty(exports, '__esModule', {
		value: true
	});
	var overflow = null;

	var set = function set() {

		if (overflow != null) return false;

		overflow = document.body.style.overflow;
		document.body.style.overflow = 'hidden';

		return true;
	};

	exports.set = set;
	var reset = function reset() {

		if (overflow == null) return false;

		document.body.style.overflow = overflow;
		overflow = null;

		return true;
	};
	exports.reset = reset;
});

},{}]},{},[2])(2)
});
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvb2JqZWN0LWFzc2lnbi9pbmRleC5qcyIsIi9Vc2Vycy90b2JpYXNyZWljaC9TaXRlcy9KUy9iYXNpY0NvbnRleHQvc3JjL3NjcmlwdHMvYmFzaWNDb250ZXh0LmpzIiwiL1VzZXJzL3RvYmlhc3JlaWNoL1NpdGVzL0pTL2Jhc2ljQ29udGV4dC9zcmMvc2NyaXB0cy9iYXNpY0NvbnRleHRJdGVtLmpzIiwiL1VzZXJzL3RvYmlhc3JlaWNoL1NpdGVzL0pTL2Jhc2ljQ29udGV4dC9zcmMvc2NyaXB0cy9jb29yZGluYXRlcy5qcyIsIi9Vc2Vycy90b2JpYXNyZWljaC9TaXRlcy9KUy9iYXNpY0NvbnRleHQvc3JjL3NjcmlwdHMvb3ZlcmZsb3cuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0tDakNxQixZQUFZO0FBRXJCLFdBRlMsWUFBWSxDQUVwQixDQUFDLEVBQUUsS0FBSyxFQUFhOzs7T0FBWCxJQUFJLHlEQUFHLEVBQUU7O3lCQUZYLFlBQVk7O0FBSS9CLFFBQUssR0FBRyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUE7QUFDckIsT0FBSSxHQUFJLCtCQUFhLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQTs7QUFFOUIsT0FBSSxDQUFDLEVBQUUsR0FBUyxJQUFJLENBQUE7QUFDcEIsT0FBSSxDQUFDLEtBQUss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Q3ZDLFVBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUE7O0FBRXZDLFNBQU8sSUFBSSxDQUFBO0VBRVgsQ0FBQTs7O0FBRU0sS0FBTSxLQUFLLEdBQUcsU0FBUixLQUFLLEdBQWM7O0FBRS9CLE1BQUksUUFBUSxJQUFFLElBQUksRUFBRSxPQUFPLEtBQUssQ0FBQTs7QUFFaEMsVUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQTtBQUN2QyxVQUFRLEdBQUcsSUFBSSxDQUFBOztBQUVmLFNBQU8sSUFBSSxDQUFBO0VBRVgsQ0FBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuJ3VzZSBzdHJpY3QnO1xudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBwcm9wSXNFbnVtZXJhYmxlID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcblxuZnVuY3Rpb24gdG9PYmplY3QodmFsKSB7XG5cdGlmICh2YWwgPT09IG51bGwgfHwgdmFsID09PSB1bmRlZmluZWQpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3QuYXNzaWduIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBudWxsIG9yIHVuZGVmaW5lZCcpO1xuXHR9XG5cblx0cmV0dXJuIE9iamVjdCh2YWwpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCwgc291cmNlKSB7XG5cdHZhciBmcm9tO1xuXHR2YXIgdG8gPSB0b09iamVjdCh0YXJnZXQpO1xuXHR2YXIgc3ltYm9scztcblxuXHRmb3IgKHZhciBzID0gMTsgcyA8IGFyZ3VtZW50cy5sZW5ndGg7IHMrKykge1xuXHRcdGZyb20gPSBPYmplY3QoYXJndW1lbnRzW3NdKTtcblxuXHRcdGZvciAodmFyIGtleSBpbiBmcm9tKSB7XG5cdFx0XHRpZiAoaGFzT3duUHJvcGVydHkuY2FsbChmcm9tLCBrZXkpKSB7XG5cdFx0XHRcdHRvW2tleV0gPSBmcm9tW2tleV07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcblx0XHRcdHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGZyb20pO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzeW1ib2xzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmIChwcm9wSXNFbnVtZXJhYmxlLmNhbGwoZnJvbSwgc3ltYm9sc1tpXSkpIHtcblx0XHRcdFx0XHR0b1tzeW1ib2xzW2ldXSA9IGZyb21bc3ltYm9sc1tpXV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdG87XG59O1xuIiwiaW1wb3J0ICogYXMgb3ZlcmZsb3cgZnJvbSAnLi9vdmVyZmxvdydcbmltcG9ydCAqIGFzIGNvb3JkaW5hdGVzIGZyb20gJy4vY29vcmRpbmF0ZXMnXG5cbmltcG9ydCBiYXNpY0NvbnRleHRJdGVtIGZyb20gJy4vYmFzaWNDb250ZXh0SXRlbSdcbmltcG9ydCBvYmplY3RBc3NpZ24gZnJvbSAnb2JqZWN0LWFzc2lnbidcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgYmFzaWNDb250ZXh0IHtcblxuXHRjb25zdHJ1Y3RvcihlLCBpdGVtcywgb3B0cyA9IHt9KSB7XG5cblx0XHRpdGVtcyA9IGl0ZW1zLnNsaWNlKClcblx0XHRvcHRzICA9IG9iamVjdEFzc2lnbih7fSwgb3B0cylcblxuXHRcdHRoaXMuaWQgICAgICAgPSBudWxsXG5cdFx0dGhpcy5pdGVtcyAgICA9IGl0ZW1zXG5cdFx0dGhpcy5vcHRzICAgICA9IG9wdHNcblx0XHR0aGlzLnBvc2l0aW9uID0gbnVsbFxuXHRcdHRoaXMuZWxlbSAgICAgPSBudWxsXG5cblx0XHR0aGlzLnBhcnNlICAgPSB0aGlzLnBhcnNlLmJpbmQodGhpcylcblx0XHR0aGlzLmFjdGl2ZSAgPSB0aGlzLmFjdGl2ZS5iaW5kKHRoaXMpXG5cdFx0dGhpcy52aXNpYmxlID0gdGhpcy52aXNpYmxlLmJpbmQodGhpcylcblx0XHR0aGlzLmNsb3NlICAgPSB0aGlzLmNsb3NlLmJpbmQodGhpcylcblx0XHR0aGlzLnNob3cgICAgPSB0aGlzLnNob3cuYmluZCh0aGlzKVxuXHRcdHRoaXMuc2hvd1N1YiA9IHRoaXMuc2hvd1N1Yi5iaW5kKHRoaXMpXG5cdFx0dGhpcy5oaWRlU3ViID0gdGhpcy5oaWRlU3ViLmJpbmQodGhpcylcblx0XHR0aGlzLmNsb3NlICAgPSB0aGlzLmNsb3NlLmJpbmQodGhpcylcblxuXHRcdC8vIEdlbmVyYXRlIHRoZSBpZCBvZiB0aGUgY29udGV4dFxuXHRcdGxldCBpZCA9IHRoaXMuaWQgPSArbmV3IERhdGUoKVxuXG5cdFx0Ly8gUGFyc2UgdGhlIG9wdGlvbnNcblx0XHR0aGlzLnBhcnNlKClcblxuXHRcdC8vIFNhdmUgY3VycmVudCBvdmVyZmxvdyBhbmQgYmxvY2sgc2Nyb2xsaW5nIG9mIHNpdGVcblx0XHRvdmVyZmxvdy5zZXQoKVxuXG5cdFx0Ly8gQ3JlYXRlIGl0ZW1zXG5cdFx0aXRlbXMuZm9yRWFjaCgoaXRlbSwgbnVtKSA9PiB7XG5cblx0XHRcdGxldCBwYXJlbnQgPSB0aGlzLFxuXHRcdFx0ICAgIG9wdHMgICA9IHsgbnVtLCBwYXJlbnQgfVxuXG5cdFx0XHRpdGVtc1tudW1dID0gbmV3IGJhc2ljQ29udGV4dEl0ZW0oaXRlbSwgb3B0cylcblxuXHRcdH0pXG5cblx0XHQvLyBSZW5kZXIgYW5kIGFkZCBjb250ZXh0IHRvIHRoZSBib2R5XG5cdFx0aWYgKG9wdHMucGFyZW50PT1udWxsKSBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgdGhpcy5yZW5kZXIoKSlcblx0XHRlbHNlICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYXNpY0NvbnRleHRDb250YWluZXInKS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHRoaXMucmVuZGVyKCkpXG5cblx0XHQvLyBTZWxlY3QgdGhlIG5ld2x5IGNyZWF0ZWQgY29udGV4dFxuXHRcdGxldCBlbGVtID0gdGhpcy5lbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmJhc2ljQ29udGV4dFtkYXRhLWlkPSckeyBpZCB9J11gKVxuXG5cdFx0Ly8gQ2FjaGUgdGhlIGNvbnRleHRcblx0XHR0aGlzLmxpbmsoZWxlbSlcblxuXHRcdC8vIENhbGN1bGF0ZSBwb3NpdGlvblxuXHRcdGxldCBwb3NpdGlvbiA9IHRoaXMucG9zaXRpb24gPSBjb29yZGluYXRlcy5nZXQoZSwgZWxlbSlcblxuXHRcdC8vIFNob3cgdGhlIGNvbnRleHRcblx0XHRvcHRzLnNob3coKVxuXG5cdFx0Ly8gQmluZCBldmVudHMgb24gY29udGV4dFxuXHRcdHRoaXMuYmluZCgpXG5cblx0XHQvLyBCaW5kIGV2ZW50cyBvbiBpdGVtc1xuXHRcdGl0ZW1zLmZvckVhY2goKGl0ZW0sIGkpID0+IHtcblxuXHRcdFx0bGV0IGVsZW0gPSB0aGlzLmVsZW0ucXVlcnlTZWxlY3RvcihgLmJhc2ljQ29udGV4dF9faXRlbVtkYXRhLW51bT0nJHsgaSB9J11gKVxuXG5cdFx0XHRpdGVtLmxpbmsoZWxlbSlcblx0XHRcdGl0ZW0uYmluZCgpXG5cblx0XHR9KVxuXG5cdFx0Ly8gQ2FsbCBjYWxsYmFjayB3aGVuIGEgZnVuY3Rpb25cblx0XHRvcHRzLmNhbGxiYWNrKClcblxuXHRcdC8vIERvIG5vdCB0cmlnZ2VyIGRlZmF1bHQgZXZlbnQgb3IgZnVydGhlciBwcm9wYWdhdGlvblxuXHRcdGlmICh0eXBlb2YgZS5wcmV2ZW50RGVmYXVsdCA9PT0gJ2Z1bmN0aW9uJykgIGUucHJldmVudERlZmF1bHQoKVxuXHRcdGlmICh0eXBlb2YgZS5zdG9wUHJvcGFnYXRpb24gPT09ICdmdW5jdGlvbicpIGUuc3RvcFByb3BhZ2F0aW9uKClcblxuXHRcdHJldHVybiB0cnVlXG5cblx0fVxuXG5cdHBhcnNlKCkge1xuXG5cdFx0bGV0IG9wdHMgPSB0aGlzLm9wdHNcblxuXHRcdGlmIChvcHRzLnBhcmVudCAmJiBvcHRzLnBhcmVudC5jb25zdHJ1Y3Rvci5uYW1lIT09J2Jhc2ljQ29udGV4dCcpIG9wdHMucGFyZW50ID0gbnVsbFxuXG5cdFx0aWYgKG9wdHMuY2xhc3M9PW51bGwpIG9wdHMuY2xhc3MgPSAnJ1xuXHRcdGlmIChvcHRzLnBhcmVudCE9bnVsbCkgb3B0cy5jbGFzcyArPSAnIGJhc2ljQ29udGV4dC0tY2hpbGQnXG5cblx0XHRpZiAodHlwZW9mIG9wdHMuc2hvdyAhPT0gJ2Z1bmN0aW9uJykgICAgIG9wdHMuc2hvdyAgICAgPSB0aGlzLnNob3dcblx0XHRpZiAodHlwZW9mIG9wdHMuY2xvc2UgIT09ICdmdW5jdGlvbicpICAgIG9wdHMuY2xvc2UgICAgPSB0aGlzLmNsb3NlXG5cdFx0aWYgKHR5cGVvZiBvcHRzLmNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSBvcHRzLmNhbGxiYWNrID0gKCkgPT4ge31cblxuXHRcdHJldHVybiB0cnVlXG5cblx0fVxuXG5cdGxpbmsoZWxlbSkge1xuXG5cdFx0dGhpcy5lbGVtID0gZWxlbVxuXG5cdFx0cmV0dXJuIHRydWVcblxuXHR9XG5cblx0YmluZCgpIHtcblxuXHRcdGxldCBlbGVtID0gdGhpcy5lbGVtLFxuXHRcdCAgICBvcHRzID0gdGhpcy5vcHRzXG5cblx0XHRpZiAob3B0cy5wYXJlbnQ9PW51bGwpIHtcblxuXHRcdFx0ZWxlbS5wYXJlbnRFbGVtZW50Lm9uY2xpY2sgICAgICAgPSBvcHRzLmNsb3NlXG5cdFx0XHRlbGVtLnBhcmVudEVsZW1lbnQub25jb250ZXh0bWVudSA9IG9wdHMuY2xvc2VcblxuXHRcdH1cblxuXHRcdGVsZW0ub25tb3VzZWVudGVyID0gKCkgPT4ge1xuXG5cdFx0XHRpZiAob3B0cy5jaGlsZCE9bnVsbCkgdGhpcy5oaWRlU3ViKClcblxuXHRcdH1cblxuXHRcdHJldHVybiB0cnVlXG5cblx0fVxuXG5cdHNob3coKSB7XG5cblx0XHRsZXQgZWxlbSAgICAgPSB0aGlzLmVsZW0sXG5cdFx0ICAgIHBvc2l0aW9uID0gdGhpcy5wb3NpdGlvblxuXG5cdFx0ZWxlbS5zdHlsZS50b3AgICAgICAgICAgICAgPSBgJHsgcG9zaXRpb24ueSB9cHhgXG5cdFx0ZWxlbS5zdHlsZS5sZWZ0ICAgICAgICAgICAgPSBgJHsgcG9zaXRpb24ueCB9cHhgXG5cdFx0ZWxlbS5zdHlsZS50cmFuc2Zvcm1PcmlnaW4gPSBgJHsgcG9zaXRpb24ucnggfXB4ICR7IHBvc2l0aW9uLnJ5IH1weGBcblx0XHRlbGVtLnN0eWxlLm9wYWNpdHkgICAgICAgICA9IDFcblxuXHRcdHJldHVybiB0cnVlXG5cblx0fVxuXG5cdHNob3dTdWIoaXRlbXMsIGl0ZW0pIHtcblxuXHRcdGxldCBvcHRzICAgICA9IHRoaXMub3B0cyxcblx0XHQgICAgaXRlbVNpemUgPSBpdGVtLmVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcblxuXHRcdC8vIERvbid0IG9wZW4gYSBuZXcgY2hpbGQgd2hlbiBhIGNoaWxkIGlzIGFscmVhZHkgdmlzaWJsZVxuXHRcdGlmIChvcHRzLmNoaWxkIT1udWxsKSByZXR1cm4gZmFsc2VcblxuXHRcdGxldCBjbG9zZSA9ICgpID0+IHtcblxuXHRcdFx0aWYgKG9wdHMuY2hpbGQhPW51bGwpIHtcblxuXHRcdFx0XHQvLyBPbmx5IGNsb3NlIGNoaWxkIHdoZW4gaG92ZXJlZCBpdGVtXG5cdFx0XHRcdC8vIGlzIG5vdCB0aGUgcHJvZHVjZXIgb2YgdGhlIGNoaWxkXG5cdFx0XHRcdGlmIChpdGVtLmFjdGl2ZSgpPT09ZmFsc2UpIHtcblxuXHRcdFx0XHRcdC8vIFJlbW92ZSBoaWdobGlnaHQgZnJvbSBpdGVtXG5cdFx0XHRcdFx0aXRlbS5lbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2Jhc2ljQ29udGV4dF9faXRlbS0taG92ZXInKVxuXG5cdFx0XHRcdFx0b3B0cy5jaGlsZC5jbG9zZSgpXG5cdFx0XHRcdFx0cmV0dXJuIHRydWVcblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0dGhpcy5jbG9zZSgpXG5cdFx0XHRcdHJldHVybiB0cnVlXG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGZhbHNlXG5cblx0XHR9XG5cblx0XHRvcHRzLmNoaWxkID0gbmV3IGJhc2ljQ29udGV4dCh7XG5cdFx0XHRjbGllbnRYIDogaXRlbVNpemUubGVmdCArIGl0ZW1TaXplLndpZHRoLFxuXHRcdFx0Y2xpZW50WSA6IGl0ZW1TaXplLnRvcFxuXHRcdH0sIGl0ZW1zLCB7XG5cdFx0XHRwYXJlbnQgOiB0aGlzLFxuXHRcdFx0Y2xvc2UgIDogY2xvc2Vcblx0XHR9KVxuXG5cdFx0Ly8gSGlnaGxpZ2h0IGN1cnJlbnQgaXRlbVxuXHRcdGl0ZW0uZWxlbS5jbGFzc0xpc3QuYWRkKCdiYXNpY0NvbnRleHRfX2l0ZW0tLWhvdmVyJylcblxuXHRcdHJldHVybiB0cnVlXG5cblx0fVxuXG5cdGhpZGVTdWIoKSB7XG5cblx0XHRsZXQgb3B0cyA9IHRoaXMub3B0c1xuXG5cdFx0aWYgKG9wdHMuY2hpbGQ9PW51bGwpICAgICAgICAgICByZXR1cm4gZmFsc2Vcblx0XHRpZiAob3B0cy5jaGlsZC5hY3RpdmUoKT09PXRydWUpIHJldHVybiBmYWxzZVxuXG5cdFx0aWYgKG9wdHMuY2hpbGQub3B0cy5jbG9zZSgpPT09dHJ1ZSkgb3B0cy5jaGlsZCA9IG51bGxcblxuXHRcdHJldHVybiB0cnVlXG5cblx0fVxuXG5cdGFjdGl2ZSgpIHtcblxuXHRcdGxldCBpZCAgID0gdGhpcy5pZCxcblx0XHQgICAgZWxlbSA9IHRoaXMuZWxlbVxuXG5cdFx0cmV0dXJuIChlbGVtLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihgLmJhc2ljQ29udGV4dFtkYXRhLWlkPSckeyBpZCB9J106aG92ZXJgKT09bnVsbCA/IGZhbHNlIDogdHJ1ZSlcblxuXHR9XG5cblx0dmlzaWJsZSgpIHtcblxuXHRcdGxldCBlbGVtID0gdGhpcy5lbGVtXG5cblx0XHRpZiAoZWxlbT09bnVsbCB8fCBlbGVtLmxlbmd0aD09PTApIHJldHVybiBmYWxzZVxuXHRcdGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcblxuXHR9XG5cblx0Y2xvc2UoKSB7XG5cblx0XHRpZiAodGhpcy52aXNpYmxlKCk9PT1mYWxzZSkgcmV0dXJuIGZhbHNlXG5cblx0XHRsZXQgb3B0cyAgICAgID0gdGhpcy5vcHRzLFxuXHRcdCAgICBlbGVtICAgICAgPSB0aGlzLmVsZW0sXG5cdFx0ICAgIGNvbnRhaW5lciA9IGVsZW0ucGFyZW50RWxlbWVudFxuXG5cdFx0Ly8gQ2xvc2UgY2hpbGQgZmlyc3Rcblx0XHRpZiAob3B0cy5jaGlsZCE9bnVsbCkgb3B0cy5jaGlsZC5jbG9zZSgpXG5cblx0XHRpZiAob3B0cy5wYXJlbnQ9PW51bGwpIGNvbnRhaW5lci5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGNvbnRhaW5lcilcblx0XHRlbHNlICAgICAgICAgICAgICAgICAgIGVsZW0ucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChlbGVtKVxuXG5cdFx0Ly8gUmVzZXQgb3ZlcmZsb3cgdG8gaXRzIG9yaWdpbmFsIHZhbHVlXG5cdFx0b3ZlcmZsb3cucmVzZXQoKVxuXG5cdFx0cmV0dXJuIHRydWVcblxuXHR9XG5cblx0cmVuZGVyKCkge1xuXG5cdFx0bGV0IGlkICAgID0gdGhpcy5pZCxcblx0XHQgICAgaXRlbXMgPSB0aGlzLml0ZW1zLFxuXHRcdCAgICBvcHRzICA9IHRoaXMub3B0cyxcblx0XHQgICAgaHRtbCAgPSAnJ1xuXG5cdFx0Ly8gUmVuZGVyIGl0ZW1zXG5cdFx0aXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gaHRtbCArPSBpdGVtLnJlbmRlcigpKVxuXG5cdFx0Ly8gV3JhcCBjb250ZXh0IGFyb3VuZCBpdGVtc1xuXHRcdGh0bWwgPSB0aGlzLnJlbmRlckNvbnRleHQoaWQsIG9wdHMsIGh0bWwpXG5cblx0XHQvLyBXcmFwIGNvbnRhaW5lciBhcm91bmQgY29udGV4dCB3aGVuIGNvbnRleHQgaXMgbm90IGEgY2hpbGRcblx0XHRpZiAob3B0cy5wYXJlbnQ9PW51bGwpIGh0bWwgPSB0aGlzLnJlbmRlckNvbnRhaW5lcihodG1sKVxuXG5cdFx0cmV0dXJuIGh0bWxcblxuXHR9XG5cblx0cmVuZGVyQ29udGV4dChpZCwgb3B0cywgaXRlbXNIVE1MKSB7XG5cblx0XHRyZXR1cm4gYFxuXHRcdCAgICAgICA8ZGl2IGNsYXNzPVwiYmFzaWNDb250ZXh0ICR7IG9wdHMuY2xhc3MgfVwiIGRhdGEtaWQ9XCIkeyBpZCB9XCI+XG5cdFx0ICAgICAgICAgICA8dGFibGU+XG5cdFx0ICAgICAgICAgICAgICAgPHRib2R5PlxuXHRcdCAgICAgICAgICAgICAgICAgICAkeyBpdGVtc0hUTUwgfVxuXHRcdCAgICAgICAgICAgICAgIDwvdGJvZHk+XG5cdFx0ICAgICAgICAgICA8L3RhYmxlPlxuXHRcdCAgICAgICA8L2Rpdj5cblx0XHQgICAgICAgYFxuXG5cdH1cblxuXHRyZW5kZXJDb250YWluZXIoY29udGV4dEhUTUwpIHtcblxuXHRcdHJldHVybiBgXG5cdFx0ICAgICAgIDxkaXYgY2xhc3M9XCJiYXNpY0NvbnRleHRDb250YWluZXJcIj5cblx0XHQgICAgICAgICAgICR7IGNvbnRleHRIVE1MIH1cblx0XHQgICAgICAgPC9kaXY+XG5cdFx0ICAgICAgIGBcblxuXHR9XG5cbn0iLCJpbXBvcnQgb2JqZWN0QXNzaWduIGZyb20gJ29iamVjdC1hc3NpZ24nXG5cbmNvbnN0IElURU0gICAgICA9ICdJVEVNJyxcbiAgICAgIFNFUEFSQVRPUiA9ICdTRVBBUkFUT1InXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGJhc2ljQ29udGV4dEl0ZW0ge1xuXG5cdGNvbnN0cnVjdG9yKGl0ZW0gPSB7fSwgb3B0cyA9IHt9KSB7XG5cblx0XHRpdGVtID0gb2JqZWN0QXNzaWduKHt9LCBpdGVtKVxuXHRcdG9wdHMgPSBvYmplY3RBc3NpZ24oe30sIG9wdHMpXG5cblx0XHR0aGlzLml0ZW0gICA9IGl0ZW1cblx0XHR0aGlzLm9wdHMgICA9IG9wdHNcblx0XHR0aGlzLmVsZW0gICA9IG51bGxcblxuXHRcdHRoaXMucGFyc2UgID0gdGhpcy5wYXJzZS5iaW5kKHRoaXMpXG5cdFx0dGhpcy5saW5rICAgPSB0aGlzLmxpbmsuYmluZCh0aGlzKVxuXHRcdHRoaXMuYmluZCAgID0gdGhpcy5iaW5kLmJpbmQodGhpcylcblx0XHR0aGlzLmFjdGl2ZSA9IHRoaXMuYWN0aXZlLmJpbmQodGhpcylcblx0XHR0aGlzLnJlbmRlciA9IHRoaXMucmVuZGVyLmJpbmQodGhpcylcblxuXHRcdHRoaXMucGFyc2UoKVxuXG5cdFx0cmV0dXJuIHRydWVcblxuXHR9XG5cblx0cGFyc2UoKSB7XG5cblx0XHRsZXQgaXRlbSA9IHRoaXMuaXRlbVxuXG5cdFx0Ly8gU2V0IGRlZmF1bHQgdmFsdWVzXG5cdFx0aWYgKGl0ZW0udHlwZT09bnVsbCkgICAgaXRlbS50eXBlICAgID0gKE9iamVjdC5rZXlzKGl0ZW0pLmxlbmd0aD09PTAgPyBTRVBBUkFUT1IgOiBJVEVNKVxuXHRcdGlmIChpdGVtLmNvbnRlbnQ9PW51bGwpIGl0ZW0uY29udGVudCA9ICdVbmRlZmluZWQnXG5cdFx0aWYgKGl0ZW0uY2xhc3M9PW51bGwpICAgaXRlbS5jbGFzcyAgID0gJydcblxuXHRcdC8vIFNldCBkZWZhdWx0IGZ1bmN0aW9uIHdoZW4gZm4gaXMgbWlzc2luZ1xuXHRcdGlmICh0eXBlb2YgaXRlbS5mbiAhPT0gJ2Z1bmN0aW9uJykgaXRlbS5mbiA9ICgpID0+IHt9XG5cblx0XHQvLyBBZGQgZGlzYWJsZWQgY2xhc3Mgd2hlbiBpdGVtIGRpc2FibGVkXG5cdFx0aWYgKGl0ZW0uZGlzYWJsZWQhPT10cnVlKSBpdGVtLmRpc2FibGVkID0gZmFsc2Vcblx0XHRpZiAoaXRlbS5kaXNhYmxlZD09PXRydWUpIGl0ZW0uY2xhc3MgKz0gJyBiYXNpY0NvbnRleHRfX2l0ZW0tLWRpc2FibGVkJ1xuXG5cdFx0Ly8gQWRkIGludmlzaWJsZSBjbGFzcyB3aGVuIGludmlzaWJsZVxuXHRcdGlmIChpdGVtLnZpc2libGUhPT1mYWxzZSkgaXRlbS52aXNpYmxlID0gdHJ1ZVxuXHRcdGlmIChpdGVtLnZpc2libGU9PT1mYWxzZSkgaXRlbS5jbGFzcyArPSAnIGJhc2ljQ29udGV4dF9faXRlbS0taW52aXNpYmxlJ1xuXG5cdFx0bGV0IG9wdHMgPSB0aGlzLm9wdHNcblxuXHRcdGlmIChvcHRzLnBhcmVudCAmJiBvcHRzLnBhcmVudC5jb25zdHJ1Y3Rvci5uYW1lIT09J2Jhc2ljQ29udGV4dCcpIG9wdHMucGFyZW50ID0gbnVsbFxuXG5cdFx0cmV0dXJuIHRydWVcblxuXHR9XG5cblx0bGluayhlbGVtKSB7XG5cblx0XHR0aGlzLmVsZW0gPSBlbGVtXG5cblx0XHRyZXR1cm4gdHJ1ZVxuXG5cdH1cblxuXHRiaW5kKCkge1xuXG5cdFx0bGV0IGl0ZW0gPSB0aGlzLml0ZW0sXG5cdFx0ICAgIG9wdHMgPSB0aGlzLm9wdHMsXG5cdFx0ICAgIGVsZW0gPSB0aGlzLmVsZW1cblxuXHRcdGlmIChlbGVtPT1udWxsKSAgICAgICAgICAgcmV0dXJuIGZhbHNlXG5cdFx0aWYgKGl0ZW0uZGlzYWJsZWQ9PT10cnVlKSByZXR1cm4gZmFsc2VcblxuXHRcdGVsZW0ub25jbGljayAgICAgICA9IGl0ZW0uZm5cblx0XHRlbGVtLm9uY29udGV4dG1lbnUgPSBpdGVtLmZuXG5cblx0XHRpZiAoaXRlbS5pdGVtcyE9bnVsbCkge1xuXG5cdFx0XHRsZXQgdGltZW91dCA9IG51bGxcblxuXHRcdFx0ZWxlbS5vbm1vdXNlZW50ZXIgPSAoKSA9PiB7XG5cdFx0XHRcdGNsZWFyVGltZW91dCh0aW1lb3V0KVxuXHRcdFx0XHR0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiBvcHRzLnBhcmVudC5zaG93U3ViKGl0ZW0uaXRlbXMsIHRoaXMpLCAxNTApXG5cdFx0XHR9XG5cblx0XHRcdGVsZW0ub25tb3VzZWxlYXZlID0gKCkgPT4ge1xuXHRcdFx0XHRjbGVhclRpbWVvdXQodGltZW91dClcblx0XHRcdFx0b3B0cy5wYXJlbnQuaGlkZVN1YigpXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gdHJ1ZVxuXG5cdH1cblxuXHRhY3RpdmUoKSB7XG5cblx0XHRsZXQgb3B0cyA9IHRoaXMub3B0cyxcblx0XHQgICAgZWxlbSA9IHRoaXMuZWxlbVxuXG5cdFx0cmV0dXJuIChlbGVtLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihgLmJhc2ljQ29udGV4dF9faXRlbVtkYXRhLW51bT0nJHsgb3B0cy5udW0gfSddOmhvdmVyYCk9PW51bGwgPyBmYWxzZSA6IHRydWUpXG5cblx0fVxuXG5cdHJlbmRlcigpIHtcblxuXHRcdGxldCBpdGVtID0gdGhpcy5pdGVtLFxuXHRcdCAgICBvcHRzID0gdGhpcy5vcHRzXG5cblx0XHRpZiAoaXRlbS50eXBlPT09SVRFTSkge1xuXG5cdFx0XHRyZXR1cm4gYFxuXHRcdFx0ICAgICAgIDx0ciBjbGFzcz1cImJhc2ljQ29udGV4dF9faXRlbSAkeyBpdGVtLmNsYXNzIH1cIiBkYXRhLW51bT1cIiR7IG9wdHMubnVtIH1cIj5cblx0XHRcdCAgICAgICAgICAgPHRkIGNsYXNzPSdiYXNpY0NvbnRleHRfX2RhdGEnPiR7IGl0ZW0uY29udGVudCB9PC90ZD5cblx0XHRcdCAgICAgICA8L3RyPlxuXHRcdFx0ICAgICAgIGBcblxuXHRcdH1cblxuXHRcdGlmIChpdGVtLnR5cGU9PT1TRVBBUkFUT1IpIHtcblxuXHRcdFx0cmV0dXJuIGBcblx0XHRcdCAgICAgICA8dHIgY2xhc3M9XCJiYXNpY0NvbnRleHRfX2l0ZW0gYmFzaWNDb250ZXh0X19pdGVtLS1zZXBhcmF0b3JcIj48L3RyPlxuXHRcdFx0ICAgICAgIGBcblxuXHRcdH1cblxuXHR9XG5cbn0iLCJjb25zdCBub3JtYWxpemUgPSBmdW5jdGlvbihlID0ge30pIHtcblxuXHRsZXQgcG9zID0ge1xuXHRcdHggOiBlLmNsaWVudFgsXG5cdFx0eSA6IGUuY2xpZW50WVxuXHR9XG5cblx0aWYgKGUudHlwZT09PSd0b3VjaGVuZCcgJiYgKHBvcy54PT1udWxsIHx8IHBvcy55PT1udWxsKSkge1xuXG5cdFx0Ly8gV2UgbmVlZCB0byBjYXB0dXJlIGNsaWVudFggYW5kIGNsaWVudFkgZnJvbSBvcmlnaW5hbCBldmVudFxuXHRcdC8vIHdoZW4gdGhlIGV2ZW50ICd0b3VjaGVuZCcgZG9lcyBub3QgcmV0dXJuIHRoZSB0b3VjaCBwb3NpdGlvblxuXG5cdFx0bGV0IHRvdWNoZXMgPSBlLmNoYW5nZWRUb3VjaGVzXG5cblx0XHRpZiAodG91Y2hlcyE9bnVsbCAmJiB0b3VjaGVzLmxlbmd0aD4wKSB7XG5cdFx0XHRwb3MueCA9IHRvdWNoZXNbMF0uY2xpZW50WFxuXHRcdFx0cG9zLnkgPSB0b3VjaGVzWzBdLmNsaWVudFlcblx0XHR9XG5cblx0fVxuXG5cdC8vIFBvc2l0aW9uIHVua25vd25cblx0aWYgKHBvcy54PT1udWxsIHx8IHBvcy54IDwgMCkgcG9zLnggPSAwXG5cdGlmIChwb3MueT09bnVsbCB8fCBwb3MueSA8IDApIHBvcy55ID0gMFxuXG5cdHJldHVybiBwb3NcblxufVxuXG5leHBvcnQgY29uc3QgZ2V0ID0gZnVuY3Rpb24oZSwgZWxlbSkge1xuXG5cdGxldCBub3JtYWxpemVkUG9zaXRpb24gPSBub3JtYWxpemUoZSlcblxuXHQvLyBTZXQgdGhlIGluaXRpYWwgcG9zaXRpb25cblx0bGV0IHggPSBub3JtYWxpemVkUG9zaXRpb24ueCxcblx0ICAgIHkgPSBub3JtYWxpemVkUG9zaXRpb24ueVxuXG5cdC8vIEdldCBzaXplIG9mIGJyb3dzZXJcblx0bGV0IGJyb3dzZXJTaXplID0ge1xuXHRcdHdpZHRoICA6IHdpbmRvdy5pbm5lcldpZHRoLFxuXHRcdGhlaWdodCA6IHdpbmRvdy5pbm5lckhlaWdodFxuXHR9XG5cblx0Ly8gR2V0IHNpemUgb2YgZWxlbVxuXHRsZXQgZWxlbVNpemUgPSB7XG5cdFx0d2lkdGggIDogZWxlbS5vZmZzZXRXaWR0aCxcblx0XHRoZWlnaHQgOiBlbGVtLm9mZnNldEhlaWdodFxuXHR9XG5cblx0Ly8gRml4IHBvc2l0aW9uIGJhc2VkIG9uIGVsZW0gYW5kIGJyb3dzZXIgc2l6ZVxuXHRpZiAoKHggKyBlbGVtU2l6ZS53aWR0aCkgPiBicm93c2VyU2l6ZS53aWR0aCkgICB4ID0geCAtICgoeCArIGVsZW1TaXplLndpZHRoKSAtIGJyb3dzZXJTaXplLndpZHRoKVxuXHRpZiAoKHkgKyBlbGVtU2l6ZS5oZWlnaHQpID4gYnJvd3NlclNpemUuaGVpZ2h0KSB5ID0geSAtICgoeSArIGVsZW1TaXplLmhlaWdodCkgLSBicm93c2VyU2l6ZS5oZWlnaHQpXG5cblx0Ly8gTWFrZSBlbGVtIHNjcm9sbGFibGUgYW5kIHN0YXJ0IGF0IHRoZSB0b3Agb2YgdGhlIGJyb3dzZXJcblx0Ly8gd2hlbiBlbGVtIGlzIGhpZ2hlciB0aGFuIHRoZSBicm93c2VyXG5cdGlmIChlbGVtU2l6ZS5oZWlnaHQgPiBicm93c2VyU2l6ZS5oZWlnaHQpIHtcblx0XHR5ID0gMFxuXHRcdGVsZW0uY2xhc3NMaXN0LmFkZCgnYmFzaWNDb250ZXh0LS1zY3JvbGxhYmxlJylcblx0fVxuXG5cdC8vIENhbGN1bGF0ZSB0aGUgcmVsYXRpdmUgcG9zaXRpb24gb2YgdGhlIG1vdXNlIHRvIHRoZSBlbGVtXG5cdGxldCByeCA9IG5vcm1hbGl6ZWRQb3NpdGlvbi54IC0geCxcblx0ICAgIHJ5ID0gbm9ybWFsaXplZFBvc2l0aW9uLnkgLSB5XG5cblx0cmV0dXJuIHsgeCwgeSwgcngsIHJ5IH1cblxufSIsImxldCBvdmVyZmxvdyA9IG51bGxcblxuZXhwb3J0IGNvbnN0IHNldCA9IGZ1bmN0aW9uKCkge1xuXG5cdGlmIChvdmVyZmxvdyE9bnVsbCkgcmV0dXJuIGZhbHNlXG5cblx0b3ZlcmZsb3cgPSBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93XG5cdGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuXG5cdHJldHVybiB0cnVlXG5cbn1cblxuZXhwb3J0IGNvbnN0IHJlc2V0ID0gZnVuY3Rpb24oKSB7XG5cblx0aWYgKG92ZXJmbG93PT1udWxsKSByZXR1cm4gZmFsc2VcblxuXHRkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gb3ZlcmZsb3dcblx0b3ZlcmZsb3cgPSBudWxsXG5cblx0cmV0dXJuIHRydWVcblxufSJdfQ==
