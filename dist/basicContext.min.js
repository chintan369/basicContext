"use strict";!function(n,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define(t):window[n]=t()}("basicContext",function(){var n=null,t="item",e="separator",o=function(){var n=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return document.querySelector(".basicContext "+n)},i=function(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return n.type=0===Object.keys(n).length?e:t,null==n["class"]&&(n["class"]=""),n.visible!==!1&&(n.visible=!0),null==n.content&&(n.content="Undefined"),n.disabled!==!0&&(n.disabled=!1),n.disabled===!0&&(n["class"]+=" basicContext__item--disabled"),"function"!=typeof n.fn&&n.type!==e&&n.disabled===!1?(console.warn("Missing fn for item '"+n.content+"'"),!1):!0},r=function(n,o){var r="";return i(n)===!1?"":n.visible===!1?"":(n.num=o,n.type===t?r="\n		       <tr class='basicContext__item "+n["class"]+"'>\n		           <td class='basicContext__data' data-num='"+n.num+"'>"+n.content+"</td>\n		       </tr>\n		       ":n.type===e&&(r="\n		       <tr class='basicContext__item basicContext__item--separator'></tr>\n		       "),r)},l=function(){var n=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],t="";return t+="\n	        <div class='basicContextContainer'>\n	            <div class='basicContext'>\n	                <table>\n	                    <tbody>\n	        ",n.forEach(function(n,e){return t+=r(n,e)}),t+="\n	                    </tbody>\n	                </table>\n	            </div>\n	        </div>\n	        "},a=function(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={x:n.clientX,y:n.clientY};if("touchend"===n.type&&(null==t.x||null==t.y)){var e=n.changedTouches;null!=e&&e.length>0&&(t.x=e[0].clientX,t.y=e[0].clientY)}return(null==t.x||t.x<0)&&(t.x=0),(null==t.y||t.y<0)&&(t.y=0),t},s=function(n,t){var e=n.x,o=n.y,i={width:window.innerWidth,height:window.innerHeight},r={width:t.offsetWidth,height:t.offsetHeight};e+r.width>i.width&&(e-=e+r.width-i.width),o+r.height>i.height&&(o-=o+r.height-i.height),r.height>i.height&&(o=0,t.classList.add("basicContext--scrollable"));var l=n.x-e,a=n.y-o;return{x:e,y:o,rx:l,ry:a}},u=function(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return null==n.fn?!1:n.visible===!1?!1:n.disabled===!0?!1:(o("td[data-num='"+n.num+"']").onclick=n.fn,o("td[data-num='"+n.num+"']").oncontextmenu=n.fn,!0)},c=function(n,t){t.style.left=n.x+"px",t.style.top=n.y+"px",t.style.transformOrigin=n.rx+"px "+n.ry+"px",t.style.opacity=1},d=function(t,e){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=l(e);document.body.insertAdjacentHTML("beforeend",r),null==n&&(n=document.body.style.overflow,document.body.style.overflow="hidden");var d=o(),f=a(t),h=s(f,d);return"function"==typeof i.show?i.show(h,d):c(h,d),d.parentElement.onclick="function"==typeof i.close?i.close:m,d.parentElement.oncontextmenu="function"==typeof i.close?i.close:m,e.forEach(u),"function"==typeof t.preventDefault&&t.preventDefault(),"function"==typeof t.stopPropagation&&t.stopPropagation(),"function"==typeof i.callback&&i.callback(),!0},f=function(){var n=o();return null==n||0===n.length?!1:!0},m=function(){if(f()===!1)return!1;var t=o().parentElement;return t.parentElement.removeChild(t),null!=n&&(document.body.style.overflow=n,n=null),!0};return{ITEM:t,SEPARATOR:e,show:d,visible:f,close:m}});