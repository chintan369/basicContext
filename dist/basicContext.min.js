"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}();!function(t,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(n):window[t]=n()}("basicContext",function(){var t=null,n="ITEM",e="SEPARATOR",i=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return t.type=0===Object.keys(t).length?e:n,null==t["class"]&&(t["class"]=""),t.visible!==!1&&(t.visible=!0),null==t.content&&(t.content="Undefined"),t.disabled!==!0&&(t.disabled=!1),t.disabled===!0&&(t["class"]+=" basicContext__item--disabled"),"function"!=typeof t.fn&&t.type!==e&&t.disabled===!1&&(console.warn("Missing fn for item '"+t.content+"'"),t=null),t},o=function(t,n){return n.parentElement.onclick=t,n.parentElement.oncontextmenu=t,!0},r=function(t,n){return void 0===t&&(t={}),null==n?!1:t.visible===!1?!1:t.disabled===!0?!1:(n.onclick=t.fn,n.oncontextmenu=t.fn,!0)},l=function(){return null!=t?!1:(t=document.body.style.overflow,document.body.style.overflow="hidden",!0)},s=function(){return null==t?!1:(document.body.style.overflow=t,t=null,!0)},a=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n={x:t.clientX,y:t.clientY};if("touchend"===t.type&&(null==n.x||null==n.y)){var e=t.changedTouches;null!=e&&e.length>0&&(n.x=e[0].clientX,n.y=e[0].clientY)}return(null==n.x||n.x<0)&&(n.x=0),(null==n.y||n.y<0)&&(n.y=0),n},u=function(t,n){var e=t.x,i=t.y,o={width:window.innerWidth,height:window.innerHeight},r={width:n.offsetWidth,height:n.offsetHeight};e+r.width>o.width&&(e-=e+r.width-o.width),i+r.height>o.height&&(i-=i+r.height-o.height),r.height>o.height&&(i=0,n.classList.add("basicContext--scrollable"));var l=t.x-e,s=t.y-i;return{x:e,y:i,rx:l,ry:s}},c=function(t,n){return n.style.left=t.x+"px",n.style.top=t.y+"px",n.style.transformOrigin=t.rx+"px "+t.ry+"px",n.style.opacity=1,!0},d=function(t){var n=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return'\n	       <div class="basicContextContainer">\n	           <div class="basicContext" data-id="'+t+'"">\n	               <table>\n	                   <tbody>\n	                   		'+n+"\n	                   </tbody>\n	               </table>\n	           </div>\n	       </div>\n	       "},f=function(t,i){var o="";return null===t?"":t.visible===!1?"":(t.num=i,t.type===n?o='\n		       <tr class="basicContext__item '+t["class"]+"\">\n		           <td class='basicContext__data' data-num=\""+t.num+'">'+t.content+"</td>\n		       </tr>\n		       ":t.type===e&&(o='\n		       <tr class="basicContext__item basicContext__item--separator"></tr>\n		       '),o)};return function(){function t(n,e){var s=this,h=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];_classCallCheck(this,t),this.dom=this.dom.bind(this),this.visible=this.visible.bind(this),this.close=this.close.bind(this),this.id=+new Date,l(),e.forEach(function(t,n){return e[n]=i(t)});var m="";e.forEach(function(t,n){return m+=f(t,n)}),m=d(this.id,m),document.body.insertAdjacentHTML("beforeend",m);var y=this.dom(),b=a(n),v=u(b,y);return"function"==typeof h.show?h.show(v,y):c(v,y),o("function"==typeof h.close?h.close:this.close,y),e.forEach(function(t){return r(t,s.dom("td[data-num='"+t.num+"']"))}),"function"==typeof n.preventDefault&&n.preventDefault(),"function"==typeof n.stopPropagation&&n.stopPropagation(),"function"==typeof h.callback&&h.callback(),!0}return _createClass(t,[{key:"dom",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return document.querySelector(".basicContext[data-id='"+this.id+"'] "+t)}},{key:"visible",value:function(){var t=this.dom();return null==t||0===t.length?!1:!0}},{key:"close",value:function(){if(this.visible()===!1)return!1;var t=this.dom().parentElement;return t.parentElement.removeChild(t),s(),!0}}]),t}()});